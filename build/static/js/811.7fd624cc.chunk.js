"use strict";(self.webpackChunkclient_buyukyol=self.webpackChunkclient_buyukyol||[]).push([[811],{7896:(e,s,a)=>{a.r(s),a.d(s,{default:()=>V,webSockedContext:()=>K});var i=a(2555),l=a(5043),c=a(3216),n=a(4117),t=a(579);const r=()=>{const{t:e}=(0,n.Bd)();return(0,t.jsx)("div",{className:"not-found-wrapper",children:(0,t.jsx)("div",{className:"sloy",children:(0,t.jsxs)("div",{className:"text1",children:[(0,t.jsx)("div",{className:"error",children:"error 404"}),(0,t.jsx)("div",{className:"text",children:e("page-not-found")})]})})})};var d=a(2457),o=a(4978),m=a(9456),h=a(6863),x=a(9722);const v=()=>{const e=(0,m.d4)((e=>e.baseUrl.data)),s=(0,c.Zp)(),{t:a}=(0,n.Bd)(),i=(0,m.wA)(),[r,v]=(0,l.useState)({}),j=[{code:"uz",name:"O'zbek tili",country_code:"uz"},{code:"en",name:"English language",country_code:"en"},{code:"ru",name:"P\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",country_code:"ru"}],g=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,l.useEffect)((()=>{localStorage.getItem("token")&&x.A.get("".concat(e,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{v(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),g("log-in"))}))}),[]),(0,t.jsxs)("div",{className:"header-wrapper",children:[(0,t.jsx)("img",{onClick:()=>s("/"),className:"logo",src:"./images/logo.webp",alt:"ada-taxi-logo",loading:"lazy"}),(0,t.jsxs)("div",{className:"center-box",children:[(0,t.jsx)("b",{onClick:()=>{g("orders"),s("/")},children:a("my_orders")}),(0,t.jsx)("b",{onClick:()=>g("about-app"),children:a("app_links")}),(0,t.jsx)("b",{onClick:()=>g("download-app"),children:a("download_app")})]}),(0,t.jsxs)("div",{className:"header-buttons",children:[(0,t.jsx)("div",{className:"language-btn",children:(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(d.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,t.jsx)("img",{className:"globe",src:"./images/globe-alt.webp",alt:"language",loading:"lazy"}),(0,t.jsx)("div",{className:"name",children:j.map(((e,s)=>(0,t.jsx)("div",{children:o.Ay.language===e.code?e.name:""},s)))})]}),(0,t.jsx)(d.A.Menu,{children:j.map((e=>{let{code:s,name:a,country_code:i}=e;return(0,t.jsx)(d.A.Item,{onClick:()=>(e=>{localStorage.setItem("lng",e),o.Ay.changeLanguage(e)})(s),children:a},i)}))})]})}),!localStorage.getItem("token")&&(0,t.jsxs)("div",{onClick:()=>g("log-in"),className:"sign-in-btn",children:[(0,t.jsx)("img",{src:"./images/logout.webp",alt:"sign-in",loading:"lazy"}),a("login")]}),localStorage.getItem("token")&&(0,t.jsx)("div",{className:"profile-client",children:(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(d.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,t.jsx)("div",{className:"image-person",children:(0,t.jsx)("img",{src:r.profile_image||"./images/user.webp",alt:"photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"info-person",children:[(0,t.jsxs)("div",{className:"name",children:[r.first_name,"\u2002",r.last_name]}),(0,t.jsx)("div",{className:"phone",children:r.phone})]})]}),(0,t.jsxs)(d.A.Menu,{children:[(0,t.jsxs)(d.A.Item,{onClick:()=>s("/profile"),children:[(0,t.jsx)("img",{src:"./images/setting.webp",alt:"settings",loading:"lazy"}),a("settings")]}),(0,t.jsxs)(d.A.Item,{onClick:()=>g("about-app"),children:[(0,t.jsx)("img",{src:"./images/information.webp",alt:"settings",loading:"lazy"}),a("app_links")]}),(0,t.jsxs)(d.A.Item,{onClick:()=>g("log-out"),children:[(0,t.jsx)("img",{src:"./images/log-out.webp",alt:"settings",loading:"lazy"}),a("logOut")]})]})]})})]})]})};var j=a(9942);var g=a(7627),p=a(2699),N=a(8041),u=a(8923),f=a(5009),_=a(9489),b=a(9130),y=a(2230),w=a(8685);const k=a.p+"static/media/success.fe95e484c435a6154d9c.wav",A=a.p+"static/media/success2.57fe6abc78a419553ee3.wav";var S=a(1684);const C=function(e){let{price:s}=e;const{t:a}=(0,n.Bd)(),[i,c]=(0,l.useState)(s),{number:r}=(0,S.zh)({from:{number:i},to:{number:s},config:{duration:500},onRest:()=>c(s)});return(0,t.jsx)(S.CS.span,{children:r.to((e=>"".concat(Math.floor(e).toLocaleString("ru-RU")," ").concat(a("sum"))))})},z=()=>{let e=(0,l.useContext)(K);const{t:s}=(0,n.Bd)(),a=(0,m.d4)((e=>e.baseUrl.data)),i=(0,m.d4)((e=>e.OrderPage.data)),c=(0,m.d4)((e=>e.ActiveOrders.data)),r=(0,m.wA)(),d=(0,m.d4)((e=>e.PickUpLocations.data)),v=(0,m.d4)((e=>e.DropOffLocations.data)),j=(0,m.d4)((e=>e.PaymentType.data)),[g,f]=((0,m.d4)((e=>e.AddClient.data)),(0,l.useState)(1)),[S,z]=(0,l.useState)(0),[I,F]=(0,l.useState)(!0),[E,T]=(0,l.useState)(""),D=[{id:"regional",name:s("direction1")},{id:"postal",name:s("direction2")},{id:"minivan",name:s("direction3")},{id:"travel",name:s("direction4")}],[B,P]=(0,l.useState)("regional"),[U,L]=(0,l.useState)([]),[O,G]=(0,l.useState)(""),[R,M]=(0,l.useState)(""),[H,q]=(0,l.useState)([]),[X,J]=(0,l.useState)([]),[Z,V]=(0,l.useState)(!1),[$,Y]=(0,l.useState)(""),[Q,W]=(0,l.useState)(""),[ee,se]=(0,l.useState)(""),[ae,ie]=(0,l.useState)(""),[le,ce]=(0,l.useState)("sender");(0,l.useEffect)((()=>{localStorage.getItem("token")&&x.A.get("".concat(a,"/api/v1/extra-services/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{q(e.data)})),me(),ne()}),[]),(0,l.useEffect)((()=>{xe()}),[d,v,X,Z,g,B]),(0,l.useEffect)((()=>{const e=setInterval((()=>{T((e=>e.length<3?e+".":""))}),500);return()=>clearInterval(e)}),[]),(0,l.useEffect)((()=>{localStorage.getItem("token")&&(e.onmessage=e=>{const s=JSON.parse(e.data);s.action&&("order_finished"===s.action&&(M(""),Y(""),W(""),V(!1),se(""),ie(""),ce("sender"),J([]),z(0)),"reject_order"===s.action&&(M(""),Y(""),W(""),V(!1),se(""),ie(""),ce("sender"),J([]),z(0)))})}),[e]);const ne=()=>{localStorage.getItem("token")&&x.A.get("".concat(a,"/api/v1/client-active-orders/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{r((0,b.r$)(e.data[0])),e.data.length>0&&(e.data[0].driver?"started"===e.data[0].status?(r((0,y.BG)(5)),e.data[0].rated&&F(!1)):r((0,y.BG)(4)):r((0,y.BG)(3)))}))},te=(e,s)=>{r((0,h.Ui)({show:!0,status:e,id:s}))},re=e=>{if("from"===e&&d.length<10){let e={address:"",latitude:null,longitude:null,number:d.length+1};r((0,N.uc)(e))}if("to"===e&&v.length<10){let e={address:"",latitude:null,longitude:null,number:v.length+1};r((0,u.Zg)(e))}},de=(e,s)=>{"from"===e&&r((0,N.qN)(s)),"to"===e&&r((0,u.p3)(s))},oe=e=>{X.includes(e)?J(X.filter((s=>s!==e))):J([...X,e])},me=()=>{let e={service:B,from_region:{latitude:41.309484,longitude:69.25133},to_region:{latitude:40.76486,longitude:72.309999},passanger_count:g,book_all_seats:Z,extra_services:X};x.A.get("https://api.adataxi.uz/api/v1/get-prices/",e).then((e=>{L(e.data)}))},he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r((0,_.xi)({show:!0,location_num:e,location_status:s}))},xe=()=>{let e={service:B,from_region:null!==d[0].latitude?d[0]:{},to_region:null!==v[0].latitude?v[0]:{},passanger_count:g,book_all_seats:Z,extra_services:X};null!==d[0].latitude===(null!==v[0].latitude)&&x.A.post("https://api.adataxi.uz/api/v1/get-prices/",e).then((e=>{L(e.data)}))},ve=()=>{let e={order:c.id,rate:S};I&&x.A.post("".concat(a,"/api/v1/order-review/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{let a=Date.now(),i={id:a,text:s("driver_rate"),img:"./images/green.svg",color:"#EDFFFA"};r((0,w.Iw)(i)),setTimeout((()=>{r((0,w.ae)(a))}),5e3),new Audio(k).play()}))};return(0,t.jsxs)("div",{className:"order-wrapper",children:[0===i&&(0,t.jsxs)("div",{className:"order-box",children:[(0,t.jsx)("div",{className:"location-box",children:(0,t.jsxs)("div",{className:"bg-location",children:[d.map(((e,a)=>(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsxs)("div",{className:"location-text",children:[(0,t.jsx)("div",{className:"location-name",children:e.address?e.address:(0,t.jsx)("div",{className:"placeholder-address",children:s("pick_up")})}),(0,t.jsx)("div",{onClick:()=>he(a,"pick_up"),className:"loc-icon",children:(0,t.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),d.length<10&&0===a&&(0,t.jsx)("div",{onClick:()=>re("from"),className:"add-icon",children:(0,t.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,t.jsx)("div",{className:"del-icon",children:(0,t.jsx)("img",{onClick:()=>de("from",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a))),v.map(((e,a)=>(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsxs)("div",{className:"location-text",children:[(0,t.jsx)("div",{className:"location-name",children:e.address?e.address:(0,t.jsx)("div",{className:"placeholder-address",children:s("drop")})}),(0,t.jsx)("div",{onClick:()=>he(a,"drop_off"),className:"loc-icon",children:(0,t.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),v.length<10&&0===a&&(0,t.jsx)("div",{onClick:()=>re("to"),className:"add-icon",children:(0,t.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,t.jsx)("div",{className:"del-icon",children:(0,t.jsx)("img",{onClick:()=>de("to",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a)))]})}),(0,t.jsx)("div",{className:"tarif-box",children:D.map(((e,s)=>(0,t.jsx)("div",{onClick:()=>{P(e.id),G("")},className:"tarif ".concat(e.id===B&&"active"),children:e.name},s)))}),(0,t.jsx)("div",{className:"tarif-price",children:U.map(((e,a)=>(0,t.jsx)("div",{onClick:()=>G(e.category&&e.category.id),children:(0,t.jsxs)("div",{className:"tarif-card ".concat(e.category&&e.category.id===O&&"active"),children:[(0,t.jsx)("img",{src:e.category&&e.category.icon,alt:"car",loading:"lazy"}),(0,t.jsx)("div",{className:"name",children:e.category&&e.category.translations[o.Ay.language].name}),(0,t.jsxs)("div",{className:"price",children:[e.cost," ",s("sum")]})]})},a)))}),(0,t.jsx)("div",{className:"funtion",children:(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("img",{src:"./images/sms2.webp",alt:"sms",loading:"lazy"}),(0,t.jsx)("input",{onChange:e=>M(e.target.value),value:R,placeholder:s("comment_driver"),type:"text"})]})}),(0,t.jsxs)("div",{onClick:()=>te("payment-type"),className:"payment",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("img",{src:"./images/payment.webp",alt:"sms",loading:"lazy"}),s("payment_type")]}),(0,t.jsxs)("div",{className:"right",children:["cash"===j.payment_type?s("cash"):s("card"),(0,t.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]}),(0,t.jsxs)("div",{className:"services",children:["postal"!==B&&H.map(((e,a)=>{const i=X.includes(e.id);if(e.is_main)return(0,t.jsxs)("div",{className:"service",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"text",children:[(0,t.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,t.jsxs)("div",{className:"price-service",children:["To\u2018lov ",e.price," ",s("sum")]})]})}),(0,t.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,t.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),"postal"!==B&&(0,t.jsxs)("div",{onClick:()=>{if(O)r((0,y.BG)(1));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};r((0,w.Iw)(a)),setTimeout((()=>{r((0,w.ae)(e))}),5e3)}},className:"service cursor",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("img",{src:"./images/filter.webp",alt:"sms",loading:"lazy"}),s("plus_service")]}),(0,t.jsxs)("div",{className:"right",children:[X.length>0&&(0,t.jsx)("div",{className:"count-service",children:X.length}),(0,t.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]})]})]}),0===i&&(0,t.jsx)("div",{onClick:()=>{if(null!==d[0].latitude&&null!==v[0].latitude&&O)r("postal"!==B?(0,y.BG)(6):(0,y.BG)(7));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};r((0,w.Iw)(a)),setTimeout((()=>{r((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,t.jsx)("div",{className:"button",children:s("next")})}),1===i&&(0,t.jsxs)("div",{className:"services-box",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("img",{onClick:()=>r((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,t.jsx)("div",{className:"title",children:s("plus_service")})]}),H.map(((e,a)=>{const i=X.includes(e.id);if(!e.is_main)return(0,t.jsxs)("div",{className:"service",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"text",children:[(0,t.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,t.jsxs)("div",{className:"price-service",children:[s("payment")," ",e.price," ",s("sum")]})]})}),(0,t.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,t.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("price")}),(0,t.jsx)("div",{className:"input-time",children:U.map(((e,s)=>{if(O===e.category.id)return(0,t.jsx)("span",{children:(0,t.jsx)(C,{price:e.cost})},s)}))})]})]}),3===i&&(0,t.jsxs)("div",{className:"search-driver",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("div",{className:"title",children:s("search_driver")}),(0,t.jsx)("span",{children:E})]}),(0,t.jsx)("div",{className:"loading",children:(0,t.jsx)("span",{className:"loader"})}),(0,t.jsxs)("div",{className:"location-box",children:[(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:c.pick_up_locations&&c.pick_up_locations.map(((e,s)=>(0,t.jsx)("span",{children:e.address},s)))})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:c.drop_off_locations&&c.drop_off_locations.map(((e,s)=>(0,t.jsx)("span",{children:e.address},s)))})]})]}),(0,t.jsxs)("div",{className:"info-box",children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("direction")}),(0,t.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("tarif")}),(0,t.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("payment_type")}),(0,t.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("sender")}),(0,t.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("person2")}),(0,t.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("pay_who")}),(0,t.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("order_id")}),(0,t.jsx)("div",{className:"val",children:c.id})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("date_time")}),(0,t.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information-plus",children:[(0,t.jsx)("div",{className:"label",children:s("plus_service")}),(0,t.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,t.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,t.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("passangers_count")}),(0,t.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("price")}),(0,t.jsxs)("div",{className:"val-price",children:[c.price," ",s("sum")]})]})]}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsxs)("div",{onClick:()=>te("cancel-order",c.id),className:"cancel-btn",children:[(0,t.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),4===i&&(0,t.jsxs)("div",{className:"get-driver",children:[(0,t.jsxs)("div",{className:"header-content",children:[(0,t.jsxs)("div",{className:"car-info",children:[(0,t.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,t.jsxs)("div",{className:"car-number",children:[(0,t.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,t.jsx)("div",{className:"line"}),(0,t.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,t.jsx)("div",{className:"car-img",children:(0,t.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,t.jsxs)("div",{className:"driver-info",children:[(0,t.jsx)("div",{className:"person-img",children:(0,t.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsxs)("div",{className:"rate",children:[(0,t.jsx)("div",{className:"label",children:s("rate")}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,t.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),(0,t.jsx)("div",{className:"button-call",children:(0,t.jsxs)("div",{className:"call-driver",children:[(0,t.jsx)("img",{src:"./images/phone.png",alt:"phone",loading:"lazy"}),(0,t.jsxs)("a",{href:"tel:".concat(c.driver.phone),children:[" ",c.driver.phone]})]})}),(0,t.jsxs)("div",{className:"location-box",children:[(0,t.jsx)("div",{className:"location-from",children:(0,t.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,t.jsx)("div",{className:"line"}),(0,t.jsx)("div",{className:"location-to",children:(0,t.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,t.jsxs)("div",{className:"info-box",children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("direction")}),(0,t.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("tarif")}),(0,t.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("payment_type")}),(0,t.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("sender")}),(0,t.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("person2")}),(0,t.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("pay_who")}),(0,t.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("order_id")}),(0,t.jsx)("div",{className:"val",children:c.id})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("date_time")}),(0,t.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information-plus",children:[(0,t.jsx)("div",{className:"label",children:s("plus_service")}),(0,t.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,t.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,t.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("passangers_count")}),(0,t.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("price")}),(0,t.jsxs)("div",{className:"val-price",children:[c.price," ",s("sum")]})]})]}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsxs)("div",{onClick:()=>te("cancel-order",c.id),className:"cancel-btn",children:[(0,t.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),5===i&&(0,t.jsxs)("div",{className:"rate-driver",children:[(0,t.jsxs)("div",{className:"header-content",children:[(0,t.jsxs)("div",{className:"car-info",children:[(0,t.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,t.jsxs)("div",{className:"car-number",children:[(0,t.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,t.jsx)("div",{className:"line"}),(0,t.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,t.jsx)("div",{className:"car-img",children:(0,t.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,t.jsxs)("div",{className:"driver-info",children:[(0,t.jsx)("div",{className:"person-img",children:(0,t.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsxs)("div",{className:"rate",children:[(0,t.jsx)("div",{className:"label",children:s("rate")}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,t.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),I&&(0,t.jsx)("div",{className:"rate-stars",children:(0,t.jsx)(p.A,{count:5,onChange:e=>{z(e),ve()},value:S,size:35,color2:"rgba(250, 190, 25, 1)",half:!1})}),(0,t.jsxs)("div",{className:"location-box",children:[(0,t.jsx)("div",{className:"location-from",children:(0,t.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,t.jsx)("div",{className:"line"}),(0,t.jsx)("div",{className:"location-to",children:(0,t.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,t.jsxs)("div",{className:"info-box",children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("direction")}),(0,t.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("tarif")}),(0,t.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("payment_type")}),(0,t.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("sender")}),(0,t.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("person2")}),(0,t.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("pay_who")}),(0,t.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("order_id")}),(0,t.jsx)("div",{className:"val",children:c.id})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("date_time")}),(0,t.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information-plus",children:[(0,t.jsx)("div",{className:"label",children:s("plus_service")}),(0,t.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,t.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,t.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("passangers_count")}),(0,t.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsx)("div",{className:"label",children:s("price")}),(0,t.jsxs)("div",{className:"val-price",children:[c.price," ",s("sum")]})]})]})]}),6===i&&(0,t.jsxs)("div",{className:"info-box",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("img",{onClick:()=>r((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,t.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("date")}),(0,t.jsx)("div",{className:"input-time",children:(0,t.jsx)("input",{value:$,onChange:e=>Y(e.target.value),type:"date"})})]}),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("time")}),(0,t.jsx)("div",{className:"input-time",children:(0,t.jsx)("input",{value:Q,onChange:e=>W(e.target.value),type:"time"})})]}),(0,t.jsxs)("div",{className:"client-count",children:[(0,t.jsx)("div",{className:"title",children:s("passangers_count")}),(0,t.jsxs)("div",{className:"counter",children:[(0,t.jsx)("div",{className:"label",children:s("passangers_count")}),(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("div",{onClick:()=>{g>1&&f((e=>e-1))},className:"button",children:(0,t.jsx)("img",{src:"./images/minus-sm.png",alt:"count"})}),(0,t.jsx)("span",{children:g}),(0,t.jsx)("div",{onClick:()=>{"regional"===B?g<4&&f((e=>e+1)):g<12&&f((e=>e+1))},className:"button",children:(0,t.jsx)("img",{src:"./images/plus-sm.png",alt:"count"})})]})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"service",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("div",{className:"text",children:(0,t.jsx)("div",{className:"name",children:s("all_seats")})})}),(0,t.jsx)("div",{onClick:()=>V((e=>!e)),className:"on-of ".concat(Z?"active-icon":""),children:(0,t.jsx)("div",{className:"on-icon ".concat(Z?"active":"")})})]})]}),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("price")}),(0,t.jsx)("div",{className:"input-time",children:U.map(((e,s)=>{if(O===e.category.id)return(0,t.jsx)("span",{children:(0,t.jsx)(C,{price:e.cost})},s)}))})]})]}),7===i&&(0,t.jsxs)("div",{className:"info-box-postal",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("img",{onClick:()=>r((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,t.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,t.jsxs)("div",{className:"info-postal",children:[(0,t.jsx)("div",{className:"title",children:s("sender")}),(0,t.jsxs)("div",{className:"person-info",children:[(0,t.jsx)("div",{className:"left-icon-person",children:(0,t.jsx)("img",{src:"./images/person.webp",alt:"person"})}),(0,t.jsxs)("div",{className:"right-info",children:[(0,t.jsx)("div",{className:"title",children:s("sender_location")}),(0,t.jsx)("div",{className:"bottom-info",children:d[0].address})]})]}),(0,t.jsxs)("div",{className:"person-info",children:[(0,t.jsx)("div",{className:"left-icon-phone",children:(0,t.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,t.jsxs)("div",{className:"right-info",children:[(0,t.jsx)("div",{className:"title",children:s("phone")}),(0,t.jsx)("div",{className:"bottom-info",children:(0,t.jsx)("input",{value:ee,onChange:e=>se(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,t.jsxs)("div",{className:"info-postal",children:[(0,t.jsx)("div",{className:"title",children:s("postal")}),(0,t.jsxs)("div",{className:"person-info",children:[(0,t.jsx)("div",{className:"left-icon-postal",children:(0,t.jsx)("img",{src:"./images/package_2_fill.webp",alt:"person"})}),(0,t.jsxs)("div",{className:"right-info",children:[(0,t.jsx)("div",{className:"title",children:s("postal_location")}),(0,t.jsx)("div",{className:"bottom-info",children:v[0].address})]})]}),(0,t.jsxs)("div",{className:"person-info",children:[(0,t.jsx)("div",{className:"left-icon-phone",children:(0,t.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,t.jsxs)("div",{className:"right-info",children:[(0,t.jsx)("div",{className:"title",children:s("phone")}),(0,t.jsx)("div",{className:"bottom-info",children:(0,t.jsx)("input",{value:ae,onChange:e=>ie(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,t.jsxs)("div",{className:"order-info",children:[(0,t.jsx)("div",{className:"title",children:s("about_order")}),(0,t.jsxs)("div",{className:"payment-who",children:[(0,t.jsx)("div",{className:"title",children:s("payment_who")}),(0,t.jsxs)("div",{className:"on-of",children:[(0,t.jsx)("div",{onClick:()=>ce("sender"),className:"of ".concat("sender"===le?"on":""),children:s("person1")}),(0,t.jsx)("div",{onClick:()=>ce("receiver"),className:"of ".concat("receiver"===le?"on":""),children:s("person2")})]})]}),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("postal"!==B?"date":"date2")}),(0,t.jsx)("div",{className:"input-time",children:(0,t.jsx)("input",{value:$,onChange:e=>Y(e.target.value),type:"date"})})]}),(0,t.jsxs)("div",{className:"form-date",children:[(0,t.jsx)("div",{className:"label",children:s("time")}),(0,t.jsx)("div",{className:"input-time",children:(0,t.jsx)("input",{value:Q,onChange:e=>W(e.target.value),type:"time"})})]})]})]}),(6===i||7===i)&&(0,t.jsx)("div",{onClick:()=>{let e={car_service:B,car_category:O,passanger_count:g,payment_type:j.payment_type,pick_up_date:"".concat($,"T").concat(Q),end_date:null,book_all_seats:Z,comment_to_driver:R,sender_phone:ee,receiver_phone:ae,payer:le,extra_services:X,pick_up_locations:d,drop_off_locations:v};if($&&Q)x.A.post("".concat(a,"/api/v1/order-create/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{r((0,b.r$)([e.data])),ne();let a=Date.now(),i={id:a,text:s("confirm"),img:"./images/green.svg",color:"#EDFFFA"};r((0,w.Iw)(i)),setTimeout((()=>{r((0,w.ae)(a))}),5e3),r((0,N.yz)()),r((0,u.Sw)()),new Audio(A).play()}));else{let e=Date.now(),a={id:e,text:s("confirm_form"),img:"./images/red.svg",color:"#FFEDF1"};r((0,w.Iw)(a)),setTimeout((()=>{r((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,t.jsx)("div",{className:"button",children:s("order")})})]})};var I=a(7621),F=a(4412);const E=["places"],T=()=>{const e=(0,F.A)("(max-width: 1024px)"),{t:s}=(0,n.Bd)(),a=(0,m.d4)((e=>e.baseUrl.data)),i=(0,m.d4)((e=>e.DriverLocation.data)),[c,r]=(0,l.useState)(!1),[d,p]=(0,l.useState)(),N=(0,m.wA)(),u=(0,m.d4)((e=>e.ModalContent.data)),f=(0,l.useRef)(null),[_,b]=(0,l.useState)([]),[y,w]=(0,l.useState)({});(0,l.useEffect)((()=>{navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;p({lat:s,lng:a})})),x.A.get("".concat(a,"/api/v1/client-history/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{b(e.data)})).catch((s=>{401!=s.response.status||e||(localStorage.removeItem("token"),localStorage.removeItem("userId"),S("log-in"))}))}),[]);const{isLoaded:k}=(0,j.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM",libraries:E,language:o.Ay.language}),A=(0,l.useMemo)((()=>({disableDefaultUI:!0,clickableIcons:!1})),[]),S=e=>{N((0,h.Ui)({show:!0,status:e}))};return k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"dashboard-wrapper",children:[(0,t.jsx)(I.A,{in:u.show&&"orders"===u.status,nodeRef:f,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"modal-sloy-orders ".concat(c?"disabled":""),children:(0,t.jsxs)("div",{ref:f,className:"modal-card",children:[(0,t.jsx)("div",{className:"header-buttons",children:(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{className:"title",children:s("my_orders")}),(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{N((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]})}),(0,t.jsx)("div",{className:"orders-list",children:_.map(((e,a)=>(0,t.jsxs)("div",{className:"order",children:[(0,t.jsx)("div",{className:"date-order",children:e.created_at.split(" ")[0]}),(0,t.jsxs)("div",{onClick:()=>{r(!0),w(e)},className:"order-info",children:[e.pick_up_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,t.jsx)("div",{className:"line"}),e.drop_off_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,t.jsxs)("div",{className:"bottom-info",children:[(0,t.jsxs)("div",{className:"left-info",children:[(0,t.jsx)("div",{className:"text",children:e.created_at.split(" ")[1].slice(0,5)}),(0,t.jsx)("div",{className:"dot"}),(0,t.jsx)("div",{className:"text",children:e.car_category.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"price",children:[e.price," ",s("sum")]})]})]})]},a)))})]})})}),(0,t.jsx)(I.A,{in:c,nodeRef:f,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"modal-sloy-orders",children:(0,t.jsxs)("div",{ref:f,className:"modal-card-about-order",children:[(0,t.jsx)("div",{className:"header",children:(0,t.jsx)("div",{onClick:()=>r(!1),className:"cancel-btn",children:(0,t.jsx)("img",{src:"./images/cancel.webp",alt:"cancel"})})}),y.driver&&y.client&&y&&(0,t.jsxs)("div",{className:"content",children:[(0,t.jsxs)("div",{className:"header-content",children:[(0,t.jsxs)("div",{className:"car-info",children:[(0,t.jsxs)("div",{className:"name-car",children:[y.driver.car_color.translations[o.Ay.language].name,"\u2002",y.driver.car_make.translations[o.Ay.language].name,"\u2002",y.driver.car_model.translations[o.Ay.language].name]}),(0,t.jsxs)("div",{className:"car-number",children:[(0,t.jsx)("div",{className:"num",children:y.driver.car_number.slice(0,2)}),(0,t.jsx)("div",{className:"line"}),(0,t.jsx)("div",{className:"num",children:y.driver.car_number.slice(2)})]})]}),(0,t.jsx)("div",{className:"car-img",children:(0,t.jsx)("img",{src:a+"/"+y.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,t.jsxs)("div",{className:"driver-info",children:[(0,t.jsx)("div",{className:"person-img",children:(0,t.jsx)("img",{src:a+"/"+y.driver.profile_image,alt:""})}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsxs)("div",{className:"name",children:[y.driver.first_name,"\u2002",y.driver.last_name]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsxs)("div",{className:"rate",children:[(0,t.jsx)("div",{className:"label",children:s("rate")}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),y.driver.rate]})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,t.jsx)("div",{className:"info",children:y.driver.finished_orders_count})]})]})]})]}),(0,t.jsxs)("div",{className:"location-box",children:[y.pick_up_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-from",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,t.jsx)("div",{className:"line"}),y.drop_off_locations.map(((e,s)=>(0,t.jsxs)("div",{className:"location-to",children:[(0,t.jsx)("div",{className:"circle-warpper",children:(0,t.jsx)("div",{className:"circle"})}),(0,t.jsx)("div",{className:"location-text",children:e.address})]},s)))]}),(0,t.jsxs)("div",{className:"information-box-order",children:[(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("direction")}),(0,t.jsx)("div",{className:"value",children:y.car_service.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("tarif")}),(0,t.jsx)("div",{className:"value",children:y.car_category.translations[o.Ay.language].name})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("payment_type")}),(0,t.jsxs)("div",{className:"value",children:[(0,t.jsx)("img",{src:"./images/money.webp",alt:"money",loading:"lazy"}),"cash"===y.payment_type&&s("cash"),"card"===y.payment_type&&s("card")]})]}),y.car_service&&"Postal"===y.car_service.translations.en.name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("sender")}),(0,t.jsx)("div",{className:"value",children:y.sender_phone})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("person2")}),(0,t.jsx)("div",{className:"value",children:y.receiver_phone})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("pay_who")}),(0,t.jsx)("div",{className:"value",children:"sender"===y.payer?s("sender"):s("person2")})]})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("order_id")}),(0,t.jsx)("div",{className:"value",children:y.id})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("date_time")}),(0,t.jsx)("div",{className:"value",children:y.end_date?y.end_date:y.pick_up_date})]}),y.car_service&&"Postal"!==y.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"information-plus",children:[(0,t.jsx)("div",{className:"label",children:s("plus_service")}),(0,t.jsx)("div",{className:"val",children:y.extra_services.map(((e,s)=>(0,t.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]})]}),(0,t.jsxs)("div",{className:"bottom-info",children:[y.car_service&&"Postal"!==y.car_service.translations.en.name&&(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("passangers_count")}),(0,t.jsx)("div",{className:"value",children:y.passanger_count})]}),(0,t.jsxs)("div",{className:"list",children:[(0,t.jsx)("div",{className:"title",children:s("price")}),(0,t.jsxs)("div",{className:"value price",children:[y.price," ",s("sum")]})]})]})]})]})})}),(0,t.jsx)("div",{className:"top-side",children:(0,t.jsx)(v,{})}),(0,t.jsxs)("div",{className:"bottom-side",children:[(0,t.jsxs)(j.u6,{zoom:11,center:d,options:A,mapContainerClassName:"map",children:[d&&(0,t.jsx)(j.X0,{position:d,icon:{url:"./images/address.png",scaledSize:{width:40,height:50}}}),i.latitude&&i.longitude&&(0,t.jsx)(j.X0,{position:{lat:i.latitude,lng:i.longitude},icon:{url:"./images/driver-icon.png",scaledSize:{width:60,height:60}}})]}),(0,t.jsx)(z,{}),(0,t.jsxs)("div",{className:"app-box",children:[(0,t.jsxs)("div",{className:"top-side-app",children:[(0,t.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"Download on the"}),(0,t.jsx)("b",{children:"App store"})]})]}),(0,t.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,t.jsx)("b",{children:"Google Play"})]})]})]}),(0,t.jsx)("div",{className:"bottom-side-app",children:(0,t.jsxs)("a",{target:"_blank",href:"https://adataxi.uz/offer-app",children:["\xa9 2025 \u041e\u041e\u041e \xabADA TAXI\xbb",s("offer")]})})]}),(0,t.jsx)("div",{className:"text-warning",children:s("map_warning")})]})]}),(0,t.jsxs)("div",{className:"mobil-device",children:[(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"./images/logo3.webp",alt:"logo"})}),(0,t.jsxs)("div",{className:"des",children:['"Mijoz Ada Taxi" platformasini',(0,t.jsx)("span",{children:" PLANSHET "}),"va",(0,t.jsx)("span",{children:" MOBIL TELEFON "}),'qurilmalari orqali foydalanish uchun App store yoki Play marketdan "Ada taxi" ilovasini yuklab olishingiz mumkin!']}),(0,t.jsxs)("div",{className:"app-box",children:[(0,t.jsxs)("div",{className:"top-side-app",children:[(0,t.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"Download on the"}),(0,t.jsx)("b",{children:"App store"})]})]}),(0,t.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,t.jsx)("b",{children:"Google Play"})]})]})]}),(0,t.jsx)("div",{className:"bottom-side-app",children:(0,t.jsxs)("a",{target:"_blank",href:"https://adataxi.uz/offer-app",children:["\xa9 2025 \u041e\u041e\u041e \xabADA TAXI\xbb",s("offer")]})})]})]})]}):(0,t.jsx)(g.A,{})},D=()=>{const{t:e}=(0,n.Bd)(),s=(0,m.d4)((e=>e.baseUrl.data)),a=(0,c.Zp)(),i=(0,m.wA)(),[r,d]=(0,l.useState)({});(0,l.useEffect)((()=>{localStorage.getItem("token")&&x.A.get("".concat(s,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{d(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),o("log-in"))}))}),[]);const o=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,t.jsxs)("div",{className:"profile-wrapper",children:[(0,t.jsx)("div",{className:"top-side",children:(0,t.jsx)(v,{})}),(0,t.jsx)("div",{className:"bottom-side",children:(0,t.jsxs)("div",{className:"information-profile",children:[(0,t.jsx)("div",{className:"photo-client",children:r.profile_image?(0,t.jsx)("img",{src:r.profile_image,alt:"photo",loading:"lazy"}):(0,t.jsx)("img",{src:"./images/user.webp",alt:"person",loading:"lazy"})}),(0,t.jsxs)("div",{className:"name",children:[r.first_name,"\u2002",r.last_name]}),(0,t.jsxs)("div",{className:"information",children:[(0,t.jsxs)("div",{className:"rate",children:[(0,t.jsx)("div",{className:"label",children:e("rate")}),(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),r.rate]})]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("div",{className:"label",children:e("orders_finishet")}),(0,t.jsx)("div",{className:"info",children:r.finished_orders_count})]})]}),(0,t.jsx)("div",{className:"contacts",children:(0,t.jsxs)("div",{className:"item",children:[(0,t.jsx)("div",{className:"label",children:e("my_phone")}),(0,t.jsx)("div",{className:"info",children:r.phone})]})}),(0,t.jsxs)("div",{className:"buttons",children:[(0,t.jsxs)("div",{onClick:()=>a("/edit-profile"),className:"item",children:[(0,t.jsx)("img",{src:"./images/edit.webp",alt:"edit",loading:"lazy"}),e("edit")]}),(0,t.jsx)("div",{className:"line"}),(0,t.jsxs)("div",{onClick:()=>o("log-out"),className:"item",children:[(0,t.jsx)("img",{src:"./images/log-out-user.webp",alt:"log-out",loading:"lazy"}),e("logOut")]})]})]})})]})},B=()=>{const{t:e}=(0,n.Bd)(),s=(0,m.d4)((e=>e.baseUrl.data)),a=(0,c.Zp)(),i=(0,m.wA)(),[r,d]=(0,l.useState)(null),[o,j]=(0,l.useState)(null),[g,p]=(0,l.useState)(""),[N,u]=(0,l.useState)(""),[f,_]=(0,l.useState)("male");(0,l.useEffect)((()=>{localStorage.getItem("token")&&x.A.get("".concat(s,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{p(e.data.first_name),u(e.data.last_name),_(e.data.gender),j(e.data.profile_image)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),b("log-in"))}))}),[]);const b=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,t.jsxs)("div",{className:"edit-profile-wrapper",children:[(0,t.jsx)("div",{className:"top-side",children:(0,t.jsx)(v,{})}),(0,t.jsx)("div",{className:"bottom-side",children:(0,t.jsxs)("div",{className:"information-profile",children:[(0,t.jsx)("div",{className:"photo-client",children:(0,t.jsx)("img",{src:o||"./images/camera.webp",alt:"photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"choose-img",children:[(0,t.jsx)("div",{className:"text",children:e(r?"edit":"add_photo")}),(0,t.jsx)("input",{onChange:e=>{const s=e.target.files[0];s&&(d(s),j(URL.createObjectURL(s)))},type:"file"})]}),(0,t.jsxs)("div",{className:"input-box",children:[(0,t.jsx)("div",{className:"label",children:e("first_name")}),(0,t.jsx)("input",{value:g,onChange:e=>p(e.target.value),type:"text"})]}),(0,t.jsxs)("div",{className:"input-box",children:[(0,t.jsx)("div",{className:"label",children:e("last_name")}),(0,t.jsx)("input",{value:N,onChange:e=>u(e.target.value),type:"text"})]}),(0,t.jsx)("div",{className:"label",children:e("gender")}),(0,t.jsxs)("div",{className:"on-of",children:[(0,t.jsx)("div",{onClick:()=>_("male"),className:"of ".concat("male"===f?"on":""),children:e("male")}),(0,t.jsx)("div",{onClick:()=>_("female"),className:"of ".concat("female"===f?"on":""),children:e("female")})]}),(0,t.jsxs)("div",{className:"buttons",children:[(0,t.jsx)("div",{onClick:()=>a("/profile"),className:"cancel-btn",children:e("cancel_order")}),(0,t.jsx)("div",{onClick:()=>{let a={first_name:g,last_name:N,gender:f},l=new FormData;for(let e in a)l.append(e,a[e]);r&&l.append("profile_image",r),x.A.post("".concat(s,"/api/v1/client/"),l,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((s=>{let a=Date.now(),l={id:a,text:e("save_info"),img:"./images/green.svg",color:"#FFFAEA"};i((0,w.Iw)(l)),setTimeout((()=>{i((0,w.ae)(a))}),5e3)}))},className:"save-btn",children:e("save_information")})]})]})})]})},P=[{path:"/",element:(0,t.jsx)(T,{})},{path:"/profile",element:(0,t.jsx)(D,{})},{path:"/edit-profile",element:(0,t.jsx)(B,{})}];var U=a(4886),L=a(771);var O=a(2075);a(7799);const G=()=>{let e=(0,l.useContext)(K);const{t:s}=(0,n.Bd)(),a=(0,l.useRef)(null),i=(0,m.d4)((e=>e.baseUrl.data)),c=(0,m.wA)(),r=(0,m.d4)((e=>e.ModalContent.data)),d=(0,m.d4)((e=>e.PaymentType.data)),[v,j]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[N,u]=(0,l.useState)(!1),[_,b]=(0,l.useState)(0),[y,k]=(0,l.useState)(60),[A,S]=(0,l.useState)(0),[C,z]=(0,l.useState)([]),[F,E]=(0,l.useState)(""),[T,D]=(0,l.useState)("");(0,l.useEffect)((()=>{const e=setInterval((()=>{y>0&&k(y-1),0===y&&(0===_?clearInterval(e):(k(60),b(_-1)))}),1e3);return()=>{clearInterval(e)}}),[N?y:null]),(0,l.useEffect)((()=>{localStorage.getItem("token")&&x.A.get("".concat(i,"/api/v1/reject-reason/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{z(e.data)}))}),[]);const B=()=>{let e={phone:v,role:"client"};x.A.post("".concat(i,"/api/v1/auth/verify_number/"),e).then((e=>{localStorage.setItem("userId",e.data.user_id),u((e=>!0)),c((0,h.Ui)({show:!0,status:"log-in-code"})),N&&(b(0),k(59))})).catch((e=>{if(400===e.response.status&&-10===e.response.data.code){let e=Date.now(),a={id:e,text:s("error_phone"),img:"./images/yellow.svg",color:"#FFFAEA"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}}))},P=()=>{x.A.post("".concat(i,"/api/v1/auth/verify_code/"),{user:localStorage.getItem("userId"),code:g,role:"client"}).then((e=>{localStorage.setItem("token",e.data.token),c((0,h.AS)({show:!1})),window.location.pathname="/edit-profile"})).catch((e=>{if(400===e.response.status&&-12===e.response.data.code){let e=Date.now(),a={id:e,text:s("error_code"),img:"./images/red.svg",color:"#FFFAEA"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}}))},G=e=>{let s={payment_type:e};c((0,O.X$)(s))};var R,M;return R=N?P:B,M="Enter",(0,l.useEffect)((()=>{const e=e=>{e.key===M&&R()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[R,M]),(0,t.jsx)(I.A,{in:r.show&&"orders"!==r.status,nodeRef:a,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"modal-sloy",children:(0,t.jsxs)("div",{ref:a,className:"modal-card",children:["log-out"===r.status&&(0,t.jsxs)("div",{className:"confirm",children:[(0,t.jsx)("div",{className:"toptext",children:s("log_out_text1")}),(0,t.jsxs)("div",{className:"btns",children:[(0,t.jsx)("button",{className:"not-out",onClick:()=>c((0,h.AS)({show:!1})),children:s("log_out_text2")}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),window.location.reload(),window.location.pathname="/"},children:s("log_out_text3")})]})]}),"log-in"===r.status&&(0,t.jsxs)("div",{className:"login-box",children:[(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"./images/logo2.webp",alt:""})}),(0,t.jsx)("h1",{className:"title",children:s("login_text")}),(0,t.jsx)("p",{className:"des",children:s("login_des")}),(0,t.jsx)("div",{className:"label",children:s("login_phone")}),(0,t.jsx)(U.Ay,{id:"phone",international:!0,defaultCountry:"UZ",value:v,onChange:j}),(0,t.jsx)("button",{onClick:B,disabled:""===v||void 0===v,className:"next-btn ".concat(""===v||void 0===v?"disabled":""),children:s("next")})]}),"log-in-code"===r.status&&(0,t.jsxs)("div",{className:"login-box",children:[(0,t.jsx)("h1",{className:"title",children:s("enter_code")}),(0,t.jsx)("p",{className:"des",children:s("enter_code2")}),(0,t.jsxs)("div",{className:"phone-number",children:[v," ",(0,t.jsx)("img",{onClick:()=>{c((0,h.Ui)({show:!0,status:"log-in"})),u(!1)},src:"./images/pencil.webp",alt:"edit-phone",loading:"lazy"})]}),(0,t.jsx)("div",{className:"inputs-verify-code",children:(0,t.jsx)(L.A,{allowedCharacters:"numeric",length:"5",onChange:e=>{p(e)}})}),N&&y>0||_>0?(0,t.jsx)("div",{className:"coundown",children:(0,t.jsxs)("div",{className:"count",children:[(0,t.jsx)("img",{src:"./images/time.png",alt:""}),_<10?"0".concat(_):_,":",y<10?"0".concat(y):y]})}):(0,t.jsx)("div",{onClick:B,className:"code-ref",children:s("enter_code3")}),(0,t.jsx)("button",{disabled:g.trim().length<5,onClick:P,className:" next-btn ".concat(g.trim().length<5?"disabled":""),children:s("login")})]}),"download-app"===r.status&&(0,t.jsxs)("div",{className:"download-app",children:[(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})}),(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"./images/logo2.webp",alt:""})}),(0,t.jsx)("h1",{className:"title",children:s("title_apps")}),(0,t.jsxs)("div",{className:"top-side-app",children:[(0,t.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"Download on the"}),(0,t.jsx)("b",{children:"App store"})]})]}),(0,t.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,t.jsxs)("div",{className:"right",children:[(0,t.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,t.jsx)("b",{children:"Google Play"})]})]})]})]}),"about-app"===r.status&&(0,t.jsxs)("div",{className:"about-app",children:[(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})}),(0,t.jsx)("h1",{className:"title",children:s("app_links")}),(0,t.jsx)("div",{className:"logo-card",children:(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"./images/logo3.webp",alt:""})})}),(0,t.jsx)("a",{href:"tel:+998915444499",children:(0,t.jsxs)("div",{className:"item line",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)("img",{src:"./images/phone.webp",alt:"phone",loading:"lazy"})}),(0,t.jsx)("div",{className:"name",children:"+998 91 544 44 99"})]}),(0,t.jsx)("div",{className:"icon-more",children:(0,t.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})})]})}),(0,t.jsx)("a",{target:"_blank",href:"https://t.me/adataxi_admin",children:(0,t.jsxs)("div",{className:"item",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)("img",{src:"./images/sms.webp",alt:"phone",loading:"lazy"})}),(0,t.jsx)("div",{className:"name",children:s("send-message")})]}),(0,t.jsx)("div",{className:"icon-more",children:(0,t.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})})]})}),(0,t.jsxs)("div",{className:"social-media",children:[(0,t.jsxs)("div",{className:"media",children:[(0,t.jsx)("a",{target:"_blank",href:"https://www.instagram.com/adataxi_uz/",children:(0,t.jsx)("img",{src:"./images/instagram.png",alt:"instagram",loading:"lazy"})}),(0,t.jsx)("div",{className:"name",children:"Facebook"})]}),(0,t.jsxs)("div",{className:"media",children:[(0,t.jsx)("a",{target:"_blank",href:"https://t.me/+Ruz2cjoeIC4xNTU6",children:(0,t.jsx)("img",{src:"./images/telegram.webp",alt:"yotube",loading:"lazy"})}),(0,t.jsx)("div",{className:"name",children:"Telegram"})]}),(0,t.jsxs)("div",{className:"media",children:[(0,t.jsx)("a",{target:"_blank",href:"https://www.youtube.com/@AdaTaxi",children:(0,t.jsx)("img",{src:"./images/youtube.webp",alt:"yotube",loading:"lazy"})}),(0,t.jsx)("div",{className:"name",children:"Youtube"})]})]}),(0,t.jsx)("div",{className:"web-sayt",children:(0,t.jsx)("a",{target:"_blank",href:"https://adataxi.uz/",children:"\xa9 2024 adataxi.uz"})})]}),"payment-type"===r.status&&(0,t.jsxs)("div",{className:"payment-type",children:[(0,t.jsx)("div",{className:"header",children:(0,t.jsx)("h1",{className:"title",children:"To'lov turini tanlang"})}),(0,t.jsxs)("div",{className:"radio-buttons",children:[(0,t.jsxs)("label",{className:"label-payment",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("img",{src:"./images/cash.png",alt:"card",loading:"lazy"}),(0,t.jsx)("span",{children:s("cash")})]}),(0,t.jsx)("input",{type:"radio",value:"cash",checked:"cash"===d.payment_type,onChange:e=>G(e.target.value),className:"w-4 h-4"})]}),(0,t.jsxs)("label",{className:"label-payment",children:[(0,t.jsxs)("div",{className:"left",children:[(0,t.jsx)("img",{src:"./images/card.webp",alt:"card",loading:"lazy"}),(0,t.jsx)("span",{children:s("card")})]}),(0,t.jsx)("input",{type:"radio",value:"card",checked:"card"===d.payment_type,onChange:e=>G(e.target.value),className:"w-4 h-4"})]})]}),(0,t.jsx)("div",{onClick:()=>{c((0,h.AS)({show:!1}))},className:"send-btn",children:s("success")})]}),"add-other"===r.status&&(0,t.jsxs)("div",{className:"add-other",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{className:"title",children:s("other-order")}),(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,t.jsxs)("div",{className:"form-box",children:[(0,t.jsx)("label",{htmlFor:"phone",children:s("phone")}),(0,t.jsx)("input",{value:F,onChange:e=>E(e.target.value),id:"phone",placeholder:s("phone_form"),type:"number"})]}),(0,t.jsxs)("div",{className:"form-box",children:[(0,t.jsx)("label",{htmlFor:"name",children:s("name")}),(0,t.jsx)("input",{value:T,onChange:e=>D(e.target.value),id:"name",placeholder:s("name_add"),type:"text"})]}),(0,t.jsx)("button",{onClick:()=>{let e={name:T,phone:F};c((0,f.L)(e)),c((0,h.AS)({show:!1}))},disabled:!(F.trim().length>0&&T.trim().length>0),className:"send-btn ".concat(F.trim().length>0&&T.trim().length>0?"":"btn-disablet"),children:s("success")})]}),"cancel-order"===r.status&&(0,t.jsxs)("div",{className:"cancel-order",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{className:"title",children:s("reason_cancel")}),(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,t.jsx)("div",{className:"radio-buttons",children:C.map(((e,s)=>(0,t.jsxs)("label",{className:"label-payment",children:[(0,t.jsx)("span",{children:e.translations[o.Ay.language].name}),(0,t.jsx)("input",{type:"radio",value:e.id,checked:A===e.id,onChange:()=>{S(e.id)}})]},e.id)))}),(0,t.jsx)("div",{onClick:()=>{e(r.id,A)},className:"send-btn",children:s("success")})]})]})})})},R=()=>{const e=(0,m.wA)(),s=(0,m.d4)((e=>e.Alerts.data));return(0,t.jsx)("div",{className:"alerts-container",children:s.length>0&&(0,t.jsx)("div",{className:"alerts-box ".concat(s.length>3?"alerts-box-hide":""),children:s.map(((s,a)=>(0,t.jsxs)("div",{style:{borderTop:"4px solid ".concat("#EDFFFA"===s.color?"#5b9f68":"#dd495f"),background:s.color},className:"alert",children:[(0,t.jsx)("div",{className:"left-side",children:(0,t.jsx)("img",{src:s.img,alt:""})}),(0,t.jsx)("div",{className:"right-side",children:s.text}),(0,t.jsx)("div",{className:"xbtn",children:(0,t.jsx)("img",{onClick:()=>{return a=s.id,void e((0,w.ae)(a));var a},src:"./images/x-button.png",alt:""})})]},a)))})})};var M=a(7305);var H=a(3687);const q=["places"],X=()=>{const{t:e}=(0,n.Bd)(),s=(0,l.useRef)(null),a=(0,m.wA)(),i=(0,m.d4)((e=>e.GetLocations.data)),c=(0,m.d4)((e=>e.PickUpLocations.data)),r=(0,m.d4)((e=>e.DropOffLocations.data)),[d,h]=(0,l.useState)(null),[v,p]=(0,l.useState)(""),[f,b]=(0,l.useState)(null);(0,l.useEffect)((()=>{if(navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})})),"pick_up"===i.location_status)if(c[i.location_num].address){let e={lat:c[i.location_num].latitude,lng:c[i.location_num].longitude};h(e),b(e),p(c[i.location_num].address)}else navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})}));if("drop_off"===i.location_status)if(r[i.location_num].address){let e={lat:r[i.location_num].latitude,lng:r[i.location_num].longitude};h(e),b(e),p(r[i.location_num].address)}else navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})}))}),[!0===i.show]);const y=s=>{let{setSelected:l}=s;const{ready:c,value:n,setValue:r,suggestions:{status:d,data:m},clearSuggestions:v}=(0,H.Ay)({requestOptions:{language:o.Ay.language}});return(0,t.jsxs)(M.G3,{onSelect:async s=>{const c=await(0,H.fx)({address:s}),{lat:n,lng:t}=await(0,H.rg)(c[0]);let d={lat:n,lng:t};const m="https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(n,"&lon=").concat(t,"&lan=en");x.A.get("".concat(m),{headers:{"Accept-Language":o.Ay.language}}).then((c=>{let o=c.data.address.city,m=c.data.address.suburb,x=c.data.address.neighbourhood,j=c.data.address.county,g=c.data.address.road,N="".concat(o?o+",":""," ").concat(m?m+",":""," \n            ").concat(x?x+",":""," ").concat(j?j+",":""," ").concat(g||"");if("uz"===c.data.address.country_code)("pick_up"===i.location_status||"drop_off"===i.location_status)&&(p(N),l(d),h({lat:n,lng:t}),r(s,!1),v());else{let s=Date.now(),i={id:s,text:e("errorLocations"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}}))},children:[(0,t.jsx)(M.oK,{value:n,onChange:e=>r(e.target.value),disabled:!c,className:"combobox-input",placeholder:e("input1")}),(0,t.jsx)("div",{className:"address-wrapper",children:(0,t.jsx)("div",{className:"list-address",children:"OK"===d&&m.map((e=>{let{place_id:s,description:a}=e;return(0,t.jsx)(M.jO,{value:a},s)}))})})]})},{isLoaded:k}=(0,j.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM",libraries:q,language:o.Ay.language}),A=(0,l.useMemo)((()=>({disableDefaultUI:!1,clickableIcons:!1})),[]);return k?(0,t.jsx)(I.A,{in:i.show,nodeRef:s,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"modal-sloy",children:(0,t.jsx)("div",{ref:s,className:"modal-card",children:(0,t.jsxs)("div",{className:"add-location",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{className:"title",children:e("choose_location")}),(0,t.jsx)("div",{className:"cancel-btn",children:(0,t.jsx)("img",{onClick:()=>{a((0,_.xi)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,t.jsx)("div",{className:"map-box",children:(0,t.jsxs)(j.u6,{zoom:10,center:d,options:A,onClick:s=>{let l=s.latLng.lat(),c=s.latLng.lng(),n={lat:l,lng:c};const t="https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(l,"&lon=").concat(c,"&lan=en");x.A.get("".concat(t),{headers:{"Accept-Language":o.Ay.language}}).then((s=>{let l=s.data.address.city,c=s.data.address.suburb,t=s.data.address.neighbourhood,r=s.data.address.county,d=s.data.address.road,o="".concat(l?l+",":""," ").concat(c?c+",":""," \n            ").concat(t?t+",":""," ").concat(r?r+",":""," ").concat(d||"");if("uz"===s.data.address.country_code)("pick_up"===i.location_status||"drop_off"===i.location_status)&&(p(o),b(n));else{let s=Date.now(),i={id:s,text:e("errorLocations"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}}))},mapContainerClassName:"map",children:[f&&(0,t.jsx)(j.pH,{icon:{url:"./images/address.png",scaledSize:{width:40,height:50}},position:f}),d&&(0,t.jsx)(j.X0,{position:d,icon:{url:"./images/my-loc.png",scaledSize:{width:40,height:40}}}),(0,t.jsx)("div",{className:"search-address",children:(0,t.jsxs)("div",{className:"places-container",children:[(0,t.jsx)(y,{setSelected:b}),(0,t.jsx)("img",{src:"./images/search.png",alt:""})]})})]})}),(0,t.jsx)("div",{onClick:()=>{if("pick_up"===i.location_status)if(v&&f)a((0,N.ST)({index:Number(i.location_num),newData:{address:v,latitude:Number(f.lat.toString().slice(0,9)),longitude:Number(f.lng.toString().slice(0,9))}})),a((0,_.xi)({show:!1})),b(null),p("");else{let s=Date.now(),i={id:s,text:e("alert7"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}if("drop_off"===i.location_status)if(v&&f)a((0,u.vS)({index:Number(i.location_num),newData:{address:v,latitude:Number(f.lat.toString().slice(0,9)),longitude:Number(f.lng.toString().slice(0,9))}})),a((0,_.xi)({show:!1})),b(null),p("");else{let s=Date.now(),i={id:s,text:e("alert7"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}},className:"send-btn",children:e("success")})]})})})}):(0,t.jsx)(g.A,{})};var J=a(5063),Z=a(5052);const K=(0,l.createContext)(),V=()=>{const e=(0,m.d4)((e=>e.baseUrl.data)),{t:s}=(0,n.Bd)(),a=(0,m.wA)(),[d,o]=(0,l.useState)(null),v=(0,l.useRef)(null);(0,l.useEffect)((()=>{if(!localStorage.getItem("token"))return;const e=new J.w3cwebsocket("wss://api.adataxi.uz/ws/client/?token=".concat(localStorage.getItem("token")));o(e);const i=Date.now(),l={id:i,text:s("net"),img:"./images/red.svg",color:"#FFEDF1"};e.onclose=e.onerror=()=>{a((0,w.Iw)(l)),setTimeout((()=>window.location.reload()),2e3)},e.onopen=()=>{a((0,w.ae)(i))},v.current=new Audio(k)}),[]),(0,l.useEffect)((()=>{if(!d)return;const e=e=>{const i=Date.now();a((0,w.Iw)({id:i,text:s(e),img:"./images/green.svg",color:"#EDFFFA"})),setTimeout((()=>a((0,w.ae)(i))),5e3),j()};d.onmessage=i=>{var l;const c=JSON.parse(i.data);if(-35===(null===(l=c.message)||void 0===l?void 0:l.code))return localStorage.removeItem("token"),localStorage.removeItem("userId"),void(window.location.pathname="/");switch(c.action){case"order_accepted":e("order_accepted"),g();break;case"arrived":e("arrived");break;case"order_started":e("order_started"),a((0,y.BG)(5));break;case"trip_started":e("trip_started");break;case"order_finished":a((0,y.BG)(0)),a((0,Z.Uc)({})),a((0,f.L)({name:"",phone:""})),a((0,u.Sw)()),a((0,N.yz)()),e("order_finished")}if("reject_order"===c.action){let e=Date.now(),i={id:e,text:s("alert_cancel"),img:"./images/green.svg",color:"#EDFFFA"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(e))}),5e3),a((0,h.AS)({show:!1})),a((0,y.BG)(0)),a((0,Z.Uc)({})),a((0,f.L)({name:"",phone:""})),a((0,u.Sw)()),a((0,N.yz)()),j()}"driver_location"===c.action&&a((0,Z.Uc)(c.message))}}),[d]);const j=()=>{var e;null===(e=v.current)||void 0===e||e.play().catch((()=>{}))},g=()=>{localStorage.getItem("token")&&x.A.get("".concat(e,"/api/v1/client-active-orders/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{const s=e.data[0];s&&(a((0,b.r$)(s)),s.driver?a((0,y.BG)("started"===s.status?5:4)):a((0,y.BG)(3)))}))};return(0,t.jsxs)(K.Provider,{value:(e,i)=>{if(d)d.send(JSON.stringify({command:"reject_order",order_id:e,reason_id:i}));else{const e=Date.now();a((0,w.Iw)({id:e,text:s("net"),img:"./images/red.svg",color:"#FFEDF1"}))}},children:[(0,t.jsx)(G,{}),(0,t.jsx)(R,{}),(0,t.jsx)(X,{}),(0,t.jsxs)(c.BV,{children:[P.map(((e,s)=>(0,t.jsx)(c.qh,(0,i.A)({},e),s))),(0,t.jsx)(c.qh,{path:"*",element:(0,t.jsx)(r,{})})]})]})}}}]);
//# sourceMappingURL=811.7fd624cc.chunk.js.map