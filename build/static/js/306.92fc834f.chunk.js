"use strict";(self.webpackChunkclient_buyukyol=self.webpackChunkclient_buyukyol||[]).push([[306],{8099:(e,s,a)=>{a.r(s),a.d(s,{default:()=>ae,webSockedContext:()=>se});var i=a(2555),l=a(5043),c=a(3216),n=a(4117),r=a(579);const d=()=>{const{t:e}=(0,n.Bd)();return(0,r.jsx)("div",{className:"not-found-wrapper",children:(0,r.jsx)("div",{className:"sloy",children:(0,r.jsxs)("div",{className:"text1",children:[(0,r.jsx)("div",{className:"error",children:"error 404"}),(0,r.jsx)("div",{className:"text",children:e("page-not-found")})]})})})};var t=a(2457),o=a(4978),m=a(9456),h=a(6863),v=a(9722);const x=()=>{const e=(0,m.d4)((e=>e.baseUrl.data)),s=(0,c.Zp)(),{t:a}=(0,n.Bd)(),i=(0,m.wA)(),[d,x]=(0,l.useState)({}),j=[{code:"uz",name:"O'zbek tili",country_code:"uz"},{code:"en",name:"English language",country_code:"en"},{code:"ru",name:"P\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",country_code:"ru"}],g=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,l.useEffect)((()=>{localStorage.getItem("token")&&v.A.get("".concat(e,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{x(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),g("log-in"))}))}),[]),(0,r.jsxs)("div",{className:"header-wrapper",children:[(0,r.jsx)("img",{onClick:()=>s("/"),className:"logo",src:"./images/logo.webp",alt:"ada-taxi-logo",loading:"lazy"}),(0,r.jsxs)("div",{className:"center-box",children:[(0,r.jsx)("b",{onClick:()=>{g("orders"),s("/")},children:a("my_orders")}),(0,r.jsx)("b",{onClick:()=>g("about-app"),children:a("app_links")}),(0,r.jsx)("b",{onClick:()=>g("download-app"),children:a("download_app")}),(0,r.jsx)("b",{onClick:()=>g("news"),children:a("news")})]}),(0,r.jsxs)("div",{className:"header-buttons",children:[(0,r.jsx)("div",{className:"language-btn",children:(0,r.jsxs)(t.A,{children:[(0,r.jsxs)(t.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("img",{className:"globe",src:"./images/globe-alt.webp",alt:"language",loading:"lazy"}),(0,r.jsx)("div",{className:"name",children:j.map(((e,s)=>(0,r.jsx)("div",{children:o.Ay.language===e.code?e.name:""},s)))})]}),(0,r.jsx)(t.A.Menu,{children:j.map((e=>{let{code:s,name:a,country_code:i}=e;return(0,r.jsx)(t.A.Item,{onClick:()=>(e=>{localStorage.setItem("lng",e),o.Ay.changeLanguage(e)})(s),children:a},i)}))})]})}),!localStorage.getItem("token")&&(0,r.jsxs)("div",{onClick:()=>g("log-in"),className:"sign-in-btn",children:[(0,r.jsx)("img",{src:"./images/logout.webp",alt:"sign-in",loading:"lazy"}),a("login")]}),localStorage.getItem("token")&&(0,r.jsx)("div",{className:"profile-client",children:(0,r.jsxs)(t.A,{children:[(0,r.jsxs)(t.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("div",{className:"image-person",children:(0,r.jsx)("img",{src:d.profile_image||"./images/user.webp",alt:"photo",loading:"lazy"})}),(0,r.jsxs)("div",{className:"info-person",children:[(0,r.jsxs)("div",{className:"name",children:[d.first_name,"\u2002",d.last_name]}),(0,r.jsx)("div",{className:"phone",children:d.phone})]})]}),(0,r.jsxs)(t.A.Menu,{children:[(0,r.jsxs)(t.A.Item,{onClick:()=>s("/profile"),children:[(0,r.jsx)("img",{src:"./images/setting.webp",alt:"settings",loading:"lazy"}),a("settings")]}),(0,r.jsxs)(t.A.Item,{onClick:()=>g("about-app"),children:[(0,r.jsx)("img",{src:"./images/information.webp",alt:"settings",loading:"lazy"}),a("app_links")]}),(0,r.jsxs)(t.A.Item,{onClick:()=>g("log-out"),children:[(0,r.jsx)("img",{src:"./images/log-out.webp",alt:"settings",loading:"lazy"}),a("logOut")]})]})]})})]})]})};var j=a(9942);var g=a(7627),p=a(2699),N=a(8041),u=a(8923),_=a(5009),f=a(9489),b=a(9130),y=a(2230),w=a(8685);const k=a.p+"static/media/success.fe95e484c435a6154d9c.wav",A=a.p+"static/media/success2.57fe6abc78a419553ee3.wav";var S=a(1684);const C=function(e){let{price:s}=e;const{t:a}=(0,n.Bd)(),[i,c]=(0,l.useState)(s),{number:d}=(0,S.zh)({from:{number:i},to:{number:s},config:{duration:500},onRest:()=>c(s)});return(0,r.jsx)(S.CS.span,{children:d.to((e=>"".concat(Math.floor(e).toLocaleString("ru-RU")," ").concat(a("sum"))))})},z=()=>{let e=(0,l.useContext)(se);const{t:s}=(0,n.Bd)(),a=(0,m.d4)((e=>e.baseUrl.data)),i=(0,m.d4)((e=>e.OrderPage.data)),c=(0,m.d4)((e=>e.ActiveOrders.data)),d=(0,m.wA)(),t=(0,m.d4)((e=>e.PickUpLocations.data)),x=(0,m.d4)((e=>e.DropOffLocations.data)),j=(0,m.d4)((e=>e.PaymentType.data)),[g,_]=((0,m.d4)((e=>e.AddClient.data)),(0,l.useState)(1)),[S,z]=(0,l.useState)(0),[I,F]=(0,l.useState)(!0),[T,D]=(0,l.useState)(""),E=[{id:"regional",name:s("direction1")},{id:"postal",name:s("direction2")},{id:"minivan",name:s("direction3")},{id:"travel",name:s("direction4")}],[B,P]=(0,l.useState)("regional"),[U,G]=(0,l.useState)([]),[L,O]=(0,l.useState)(""),[R,M]=(0,l.useState)(""),[H,X]=(0,l.useState)([]),[J,Z]=(0,l.useState)([]),[$,q]=(0,l.useState)(!1),[K,V]=(0,l.useState)(""),[Y,W]=(0,l.useState)(""),[Q,ee]=(0,l.useState)(""),[ae,ie]=(0,l.useState)(""),[le,ce]=(0,l.useState)("sender");(0,l.useEffect)((()=>{localStorage.getItem("token")&&v.A.get("".concat(a,"/api/v1/extra-services/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{X(e.data)})),ne()}),[]),(0,l.useEffect)((()=>{he()}),[t,x,J,$,g,B]),(0,l.useEffect)((()=>{const e=setInterval((()=>{D((e=>e.length<3?e+".":""))}),500);return()=>clearInterval(e)}),[]),(0,l.useEffect)((()=>{localStorage.getItem("token")&&(e.onmessage=e=>{const s=JSON.parse(e.data);s.action&&("order_finished"===s.action&&(M(""),V(""),W(""),q(!1),ee(""),ie(""),ce("sender"),Z([]),z(0)),"reject_order"===s.action&&(M(""),V(""),W(""),q(!1),ee(""),ie(""),ce("sender"),Z([]),z(0)))})}),[e]);const ne=()=>{localStorage.getItem("token")&&v.A.get("".concat(a,"/api/v1/client-active-orders/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{d((0,b.r$)(e.data[0])),e.data.length>0&&(e.data[0].driver?"started"===e.data[0].status?(d((0,y.BG)(5)),e.data[0].rated&&F(!1)):d((0,y.BG)(4)):d((0,y.BG)(3)))}))},re=(e,s)=>{d((0,h.Ui)({show:!0,status:e,id:s}))},de=e=>{if("from"===e&&t.length<10){let e={address:"",latitude:null,longitude:null,number:t.length+1};d((0,N.uc)(e))}if("to"===e&&x.length<10){let e={address:"",latitude:null,longitude:null,number:x.length+1};d((0,u.Zg)(e))}},te=(e,s)=>{"from"===e&&d((0,N.qN)(s)),"to"===e&&d((0,u.p3)(s))},oe=e=>{J.includes(e)?Z(J.filter((s=>s!==e))):Z([...J,e])},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";d((0,f.xi)({show:!0,location_num:e,location_status:s}))},he=()=>{let e={service:B,from_region:null!==t[0].latitude?t[0]:{},to_region:null!==x[0].latitude?x[0]:{},passanger_count:g,book_all_seats:$,extra_services:J};localStorage.getItem("token")&&null!==t[0].latitude===(null!==x[0].latitude)&&v.A.post("https://api.adataxi.uz/api/v1/get-prices/",e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{var s;(G(e.data),L)||O(null===(s=e.data[0].category)||void 0===s?void 0:s.id)})).catch((e=>{if(-40===e.response.data.code){d((0,u.Sw)());let e=Date.now(),a={id:e,text:s("location-error"),img:"./images/red.svg",color:"#ffeaea"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}}))},ve=()=>{let e={order:c.id,rate:S};I&&v.A.post("".concat(a,"/api/v1/order-review/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{let a=Date.now(),i={id:a,text:s("driver_rate"),img:"./images/green.svg",color:"#EDFFFA"};d((0,w.Iw)(i)),setTimeout((()=>{d((0,w.ae)(a))}),5e3),new Audio(k).play()}))};return(0,r.jsxs)("div",{className:"order-wrapper",children:[0===i&&(0,r.jsxs)("div",{className:"order-box",children:[(0,r.jsx)("div",{className:"location-box",children:(0,r.jsxs)("div",{className:"bg-location",children:[t.map(((e,a)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsxs)("div",{className:"location-text",children:[(0,r.jsx)("div",{className:"location-name",children:e.address?e.address:(0,r.jsx)("div",{className:"placeholder-address",children:s("pick_up")})}),(0,r.jsx)("div",{onClick:()=>me(a,"pick_up"),className:"loc-icon",children:(0,r.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),t.length<10&&0===a&&(0,r.jsx)("div",{onClick:()=>de("from"),className:"add-icon",children:(0,r.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,r.jsx)("div",{className:"del-icon",children:(0,r.jsx)("img",{onClick:()=>te("from",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a))),x.map(((e,a)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsxs)("div",{className:"location-text",children:[(0,r.jsx)("div",{className:"location-name",children:e.address?e.address:(0,r.jsx)("div",{className:"placeholder-address",children:s("drop")})}),(0,r.jsx)("div",{onClick:()=>me(a,"drop_off"),className:"loc-icon",children:(0,r.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),x.length<10&&0===a&&(0,r.jsx)("div",{onClick:()=>de("to"),className:"add-icon",children:(0,r.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,r.jsx)("div",{className:"del-icon",children:(0,r.jsx)("img",{onClick:()=>te("to",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a)))]})}),(0,r.jsx)("div",{className:"tarif-box",children:E.map(((e,s)=>(0,r.jsx)("div",{onClick:()=>{P(e.id),O("")},className:"tarif ".concat(e.id===B&&"active"),children:e.name},s)))}),(0,r.jsx)("div",{className:"tarif-price",children:U.map(((e,a)=>(0,r.jsx)("div",{onClick:()=>O(e.category&&e.category.id),children:(0,r.jsxs)("div",{className:"tarif-card ".concat(e.category&&e.category.id===L&&"active"),children:[(0,r.jsx)("img",{src:e.category&&e.category.icon,alt:"car",loading:"lazy"}),(0,r.jsx)("div",{className:"name",children:e.category&&e.category.translations[o.Ay.language].name}),e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsxs)("div",{className:"discount-price",children:[e.discount_price," ",s("sum")]})]}):(0,r.jsxs)("div",{className:"price",children:[e.cost," ",s("sum")]})]})},a)))}),(0,r.jsx)("div",{className:"funtion",children:(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/sms2.webp",alt:"sms",loading:"lazy"}),(0,r.jsx)("input",{onChange:e=>M(e.target.value),value:R,placeholder:s("comment_driver"),type:"text"})]})}),(0,r.jsxs)("div",{onClick:()=>re("payment-type"),className:"payment",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/payment.webp",alt:"sms",loading:"lazy"}),s("payment_type")]}),(0,r.jsxs)("div",{className:"right",children:["cash"===j.payment_type?s("cash"):s("card"),(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]}),(0,r.jsxs)("div",{className:"services",children:["postal"!==B&&H.map(((e,a)=>{const i=J.includes(e.id);if(e.is_main)return(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsxs)("div",{className:"text",children:[(0,r.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,r.jsxs)("div",{className:"price-service",children:["To\u2018lov ",e.price," ",s("sum")]})]})}),(0,r.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,r.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),"postal"!==B&&(0,r.jsxs)("div",{onClick:()=>{if(L)d((0,y.BG)(1));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"service cursor",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/filter.webp",alt:"sms",loading:"lazy"}),s("plus_service")]}),(0,r.jsxs)("div",{className:"right",children:[J.length>0&&(0,r.jsx)("div",{className:"count-service",children:J.length}),(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]})]})]}),0===i&&(0,r.jsx)("div",{onClick:()=>{if(null!==t[0].latitude&&null!==x[0].latitude&&L)d("postal"!==B?(0,y.BG)(6):(0,y.BG)(7));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,r.jsx)("div",{className:"button",children:s("next")})}),1===i&&(0,r.jsxs)("div",{className:"services-box",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_service")})]}),H.map(((e,a)=>{const i=J.includes(e.id);if(!e.is_main)return(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsxs)("div",{className:"text",children:[(0,r.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,r.jsxs)("div",{className:"price-service",children:[s("payment")," ",e.price," ",s("sum")]})]})}),(0,r.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,r.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsx)("div",{className:"input-time",children:U.map(((e,a)=>{if(L===e.category.id)return(0,r.jsx)("span",{children:e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsx)("div",{className:"discount-price",children:(0,r.jsx)(C,{price:e.discount_price})})]}):(0,r.jsxs)("div",{className:"price",children:[(0,r.jsx)(C,{price:e.cost})," ",s("sum")]})},a)}))})]})]}),3===i&&(0,r.jsxs)("div",{className:"search-driver",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("div",{className:"title",children:s("search_driver")}),(0,r.jsx)("span",{children:T})]}),(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("span",{className:"loader"})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations&&c.pick_up_locations.map(((e,s)=>(0,r.jsx)("span",{children:e.address},s)))})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations&&c.drop_off_locations.map(((e,s)=>(0,r.jsx)("span",{children:e.address},s)))})]})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.discount_price>0&&c.discount_price,c.cost>0&&c.cost,s("sum")]})]})]}),(0,r.jsx)("div",{className:"buttons",children:(0,r.jsxs)("div",{onClick:()=>re("cancel-order",c.id),className:"cancel-btn",children:[(0,r.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),4===i&&(0,r.jsxs)("div",{className:"get-driver",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:s("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),(0,r.jsx)("div",{className:"button-call",children:(0,r.jsxs)("div",{className:"call-driver",children:[(0,r.jsx)("img",{src:"./images/phone.png",alt:"phone",loading:"lazy"}),(0,r.jsxs)("a",{href:"tel:".concat(c.driver.phone),children:[" ",c.driver.phone]})]})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsx)("div",{className:"location-from",children:(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"location-to",children:(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.discount_price>0&&c.discount_price,c.cost>0&&c.cost,s("sum")]})]})]}),(0,r.jsx)("div",{className:"buttons",children:(0,r.jsxs)("div",{onClick:()=>re("cancel-order",c.id),className:"cancel-btn",children:[(0,r.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),5===i&&(0,r.jsxs)("div",{className:"rate-driver",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:s("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),I&&(0,r.jsx)("div",{className:"rate-stars",children:(0,r.jsx)(p.A,{count:5,onChange:e=>{z(e),ve()},value:S,size:35,color2:"rgba(250, 190, 25, 1)",half:!1})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsx)("div",{className:"location-from",children:(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"location-to",children:(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.price," ",s("sum")]})]})]})]}),6===i&&(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("date")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:K,onChange:e=>V(e.target.value),type:"date"})})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("time")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:Y,onChange:e=>W(e.target.value),type:"time"})})]}),(0,r.jsxs)("div",{className:"client-count",children:[(0,r.jsx)("div",{className:"title",children:s("passangers_count")}),(0,r.jsxs)("div",{className:"counter",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{onClick:()=>{g>1&&_((e=>e-1))},className:"button",children:(0,r.jsx)("img",{src:"./images/minus-sm.png",alt:"count"})}),(0,r.jsx)("span",{children:g}),(0,r.jsx)("div",{onClick:()=>{"regional"===B?g<4&&_((e=>e+1)):g<12&&_((e=>e+1))},className:"button",children:(0,r.jsx)("img",{src:"./images/plus-sm.png",alt:"count"})})]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("div",{className:"text",children:(0,r.jsx)("div",{className:"name",children:s("all_seats")})})}),(0,r.jsx)("div",{onClick:()=>q((e=>!e)),className:"on-of ".concat($?"active-icon":""),children:(0,r.jsx)("div",{className:"on-icon ".concat($?"active":"")})})]})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsx)("div",{className:"input-time",children:U.map(((e,a)=>{if(L===e.category.id)return(0,r.jsx)("span",{children:e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsx)("div",{className:"discount-price",children:(0,r.jsx)(C,{price:e.discount_price})})]}):(0,r.jsxs)("div",{className:"price",children:[(0,r.jsx)(C,{price:e.cost})," ",s("sum")]})},a)}))})]})]}),7===i&&(0,r.jsxs)("div",{className:"info-box-postal",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,r.jsxs)("div",{className:"info-postal",children:[(0,r.jsx)("div",{className:"title",children:s("sender")}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-person",children:(0,r.jsx)("img",{src:"./images/person.webp",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("sender_location")}),(0,r.jsx)("div",{className:"bottom-info",children:t[0].address})]})]}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-phone",children:(0,r.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("phone")}),(0,r.jsx)("div",{className:"bottom-info",children:(0,r.jsx)("input",{value:Q,onChange:e=>ee(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,r.jsxs)("div",{className:"info-postal",children:[(0,r.jsx)("div",{className:"title",children:s("postal")}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-postal",children:(0,r.jsx)("img",{src:"./images/package_2_fill.webp",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("postal_location")}),(0,r.jsx)("div",{className:"bottom-info",children:x[0].address})]})]}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-phone",children:(0,r.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("phone")}),(0,r.jsx)("div",{className:"bottom-info",children:(0,r.jsx)("input",{value:ae,onChange:e=>ie(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,r.jsxs)("div",{className:"order-info",children:[(0,r.jsx)("div",{className:"title",children:s("about_order")}),(0,r.jsxs)("div",{className:"payment-who",children:[(0,r.jsx)("div",{className:"title",children:s("payment_who")}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>ce("sender"),className:"of ".concat("sender"===le?"on":""),children:s("person1")}),(0,r.jsx)("div",{onClick:()=>ce("receiver"),className:"of ".concat("receiver"===le?"on":""),children:s("person2")})]})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("postal"!==B?"date":"date2")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:K,onChange:e=>V(e.target.value),type:"date"})})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("time")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:Y,onChange:e=>W(e.target.value),type:"time"})})]})]})]}),(6===i||7===i)&&(0,r.jsx)("div",{onClick:()=>{let e={car_service:B,car_category:L,passanger_count:g,payment_type:j.payment_type,pick_up_date:"".concat(K,"T").concat(Y),end_date:null,book_all_seats:$,comment_to_driver:R,sender_phone:Q,receiver_phone:ae,payer:le,extra_services:J,pick_up_locations:t,drop_off_locations:x};if(K&&Y)v.A.post("".concat(a,"/api/v1/order-create/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{d((0,b.r$)([e.data])),ne();let a=Date.now(),i={id:a,text:s("confirm"),img:"./images/green.svg",color:"#EDFFFA"};d((0,w.Iw)(i)),setTimeout((()=>{d((0,w.ae)(a))}),5e3),d((0,N.yz)()),d((0,u.Sw)()),new Audio(A).play()}));else{let e=Date.now(),a={id:e,text:s("confirm_form"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,r.jsx)("div",{className:"button",children:s("order")})})]})};var I=a(7621),F=a(1591);var T=a(499);const D=()=>{const e=(0,m.d4)((e=>e.baseUrl.data)),s=(0,c.Zp)(),{t:a}=(0,n.Bd)(),i=(0,m.wA)(),[d,t]=(0,l.useState)({}),[o,x]=(0,l.useState)({}),[j,g]=(0,l.useState)("");(0,l.useEffect)((()=>{localStorage.getItem("token")&&(v.A.get("".concat(e,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{x(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),p("log-in"))})),v.A.get("".concat(e,"/api/v1/mycode/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{g(e.data.code)})))}),[]);const p=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,l.useEffect)((()=>{localStorage.getItem("token")&&v.A.get("".concat(e,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{t(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),p("log-in"))}))}),[]),(0,r.jsxs)("div",{className:"header-wrapper-mobile",children:[(0,r.jsx)("div",{className:"header-buttons",children:(0,r.jsxs)("div",{className:"information-profile",children:[(0,r.jsx)("div",{className:"photo-client",children:o.profile_image?(0,r.jsx)("img",{src:o.profile_image,alt:"photo",loading:"lazy"}):(0,r.jsx)("img",{src:"./images/user.webp",alt:"person",loading:"lazy"})}),(0,r.jsxs)("div",{className:"name",children:[o.first_name,"\u2002",o.last_name]}),(0,r.jsx)("div",{className:"contact",children:(0,r.jsx)("div",{className:"info",children:o.phone})}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:a("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),o.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:a("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:o.finished_orders_count})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"lef-code",children:[(0,r.jsx)("div",{className:"label",children:a("your_code")}),(0,r.jsxs)("div",{className:"your-code",children:[j,(0,r.jsx)("img",{onClick:()=>{j&&navigator.clipboard.writeText(j).then((()=>{let e=Date.now(),s={id:e,text:a("referal_alert5"),img:"./images/green.svg",color:"#EDFFFA"};i((0,w.Iw)(s)),setTimeout((()=>{i((0,w.ae)(e))}),5e3)}))},src:"./images/copy.png",alt:"copy"})]})]})]}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsxs)("div",{onClick:()=>{s("/edit-profile"),i((0,T.jD)({show:!1}))},className:"item",children:[(0,r.jsx)("img",{src:"./images/edit.webp",alt:"edit",loading:"lazy"}),a("edit")]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{onClick:()=>{p("log-out"),i((0,T.jD)({show:!1}))},className:"item",children:[(0,r.jsx)("img",{src:"./images/log-out-user.webp",alt:"log-out",loading:"lazy"}),a("logOut")]})]})]})}),(0,r.jsxs)("div",{className:"center-box",children:[(0,r.jsxs)("div",{className:"menu-item",onClick:()=>{p("orders"),s("/"),i((0,T.jD)({show:!1}))},children:[(0,r.jsx)("img",{src:"./images/history.png",alt:""}),a("my_orders")]}),(0,r.jsxs)("div",{className:"menu-item",onClick:()=>{p("about-app"),i((0,T.jD)({show:!1}))},children:[(0,r.jsx)("img",{src:"./images/call.png",alt:""}),a("app_links")]}),(0,r.jsxs)("div",{className:"menu-item",onClick:()=>{p("download-app"),i((0,T.jD)({show:!1}))},children:[(0,r.jsx)("img",{src:"./images/app.png",alt:""}),a("download_app")]})]})]})};const E=function(e){let{price:s}=e;const{t:a}=(0,n.Bd)(),[i,c]=(0,l.useState)(s),{number:d}=(0,S.zh)({from:{number:i},to:{number:s},config:{duration:500},onRest:()=>c(s)});return(0,r.jsx)(S.CS.span,{children:d.to((e=>"".concat(Math.floor(e).toLocaleString("ru-RU")," ").concat(a("sum"))))})},B=()=>{let e=(0,l.useContext)(se);const{t:s}=(0,n.Bd)(),a=(0,m.d4)((e=>e.baseUrl.data)),i=(0,m.d4)((e=>e.OrderPage.data)),c=(0,m.d4)((e=>e.ActiveOrders.data)),d=(0,m.wA)(),t=(0,m.d4)((e=>e.PickUpLocations.data)),x=(0,m.d4)((e=>e.DropOffLocations.data)),j=(0,m.d4)((e=>e.PaymentType.data)),[g,_]=((0,m.d4)((e=>e.AddClient.data)),(0,l.useState)(1)),[S,C]=(0,l.useState)(0),[z,I]=(0,l.useState)(!0),[F,T]=(0,l.useState)(""),D=[{id:"regional",name:s("direction1")},{id:"postal",name:s("direction2")},{id:"minivan",name:s("direction3")},{id:"travel",name:s("direction4")}],[B,P]=(0,l.useState)("regional"),[U,G]=(0,l.useState)([]),[L,O]=(0,l.useState)(""),[R,M]=(0,l.useState)(""),[H,X]=(0,l.useState)([]),[J,Z]=(0,l.useState)([]),[$,q]=(0,l.useState)(!1),[K,V]=(0,l.useState)(""),[Y,W]=(0,l.useState)(""),[Q,ee]=(0,l.useState)(""),[ae,ie]=(0,l.useState)(""),[le,ce]=(0,l.useState)("sender");(0,l.useEffect)((()=>{localStorage.getItem("token")&&v.A.get("".concat(a,"/api/v1/extra-services/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{X(e.data)})),ne()}),[]),(0,l.useEffect)((()=>{he()}),[t,x,J,$,g,B]),(0,l.useEffect)((()=>{const e=setInterval((()=>{T((e=>e.length<3?e+".":""))}),500);return()=>clearInterval(e)}),[]),(0,l.useEffect)((()=>{localStorage.getItem("token")&&(e.onmessage=e=>{const s=JSON.parse(e.data);s.action&&("order_finished"===s.action&&(M(""),V(""),W(""),q(!1),ee(""),ie(""),ce("sender"),Z([]),C(0)),"reject_order"===s.action&&(M(""),V(""),W(""),q(!1),ee(""),ie(""),ce("sender"),Z([]),C(0)))})}),[e]);const ne=()=>{localStorage.getItem("token")&&v.A.get("".concat(a,"/api/v1/client-active-orders/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{d((0,b.r$)(e.data[0])),e.data.length>0&&(e.data[0].driver?"started"===e.data[0].status?(d((0,y.BG)(5)),e.data[0].rated&&I(!1)):d((0,y.BG)(4)):d((0,y.BG)(3)))}))},re=(e,s)=>{d((0,h.Ui)({show:!0,status:e,id:s}))},de=e=>{if("from"===e&&t.length<10){let e={address:"",latitude:null,longitude:null,number:t.length+1};d((0,N.uc)(e))}if("to"===e&&x.length<10){let e={address:"",latitude:null,longitude:null,number:x.length+1};d((0,u.Zg)(e))}},te=(e,s)=>{"from"===e&&d((0,N.qN)(s)),"to"===e&&d((0,u.p3)(s))},oe=e=>{J.includes(e)?Z(J.filter((s=>s!==e))):Z([...J,e])},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";d((0,f.xi)({show:!0,location_num:e,location_status:s}))},he=()=>{let e={service:B,from_region:null!==t[0].latitude?t[0]:{},to_region:null!==x[0].latitude?x[0]:{},passanger_count:g,book_all_seats:$,extra_services:J};localStorage.getItem("token")&&null!==t[0].latitude===(null!==x[0].latitude)&&v.A.post("https://api.adataxi.uz/api/v1/get-prices/",e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{var s;(G(e.data),L)||O(null===(s=e.data[0].category)||void 0===s?void 0:s.id)})).catch((e=>{if(-40===e.response.data.code){d((0,u.Sw)());let e=Date.now(),a={id:e,text:s("location-error"),img:"./images/red.svg",color:"#ffeaea"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}}))},ve=()=>{let e={order:c.id,rate:S};z&&v.A.post("".concat(a,"/api/v1/order-review/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{let a=Date.now(),i={id:a,text:s("driver_rate"),img:"./images/green.svg",color:"#EDFFFA"};d((0,w.Iw)(i)),setTimeout((()=>{d((0,w.ae)(a))}),5e3),new Audio(k).play()}))};return(0,r.jsxs)("div",{className:"order-wrapper-mobile",children:[0===i&&(0,r.jsxs)("div",{className:"order-box",children:[(0,r.jsx)("div",{className:"location-box",children:(0,r.jsxs)("div",{className:"bg-location",children:[t.map(((e,a)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsxs)("div",{className:"location-text",children:[(0,r.jsx)("div",{className:"location-name",children:e.address?e.address:(0,r.jsx)("div",{className:"placeholder-address",children:s("pick_up")})}),(0,r.jsx)("div",{onClick:()=>me(a,"pick_up"),className:"loc-icon",children:(0,r.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),t.length<10&&0===a&&(0,r.jsx)("div",{onClick:()=>de("from"),className:"add-icon",children:(0,r.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,r.jsx)("div",{className:"del-icon",children:(0,r.jsx)("img",{onClick:()=>te("from",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a))),x.map(((e,a)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsxs)("div",{className:"location-text",children:[(0,r.jsx)("div",{className:"location-name",children:e.address?e.address:(0,r.jsx)("div",{className:"placeholder-address",children:s("drop")})}),(0,r.jsx)("div",{onClick:()=>me(a,"drop_off"),className:"loc-icon",children:(0,r.jsx)("img",{src:"./images/add-pin.png",alt:"add",loading:"lazy"})}),x.length<10&&0===a&&(0,r.jsx)("div",{onClick:()=>de("to"),className:"add-icon",children:(0,r.jsx)("img",{src:"./images/plus.webp",alt:"add",loading:"lazy"})}),a>0&&(0,r.jsx)("div",{className:"del-icon",children:(0,r.jsx)("img",{onClick:()=>te("to",e.number),src:"./images/trash.webp",alt:"add",loading:"lazy"})})]})]},a)))]})}),(0,r.jsx)("div",{className:"tarif-box",children:D.map(((e,s)=>(0,r.jsx)("div",{onClick:()=>{P(e.id),O("")},className:"tarif ".concat(e.id===B&&"active"),children:e.name},s)))}),(0,r.jsx)("div",{className:"tarif-price",children:U.map(((e,a)=>(0,r.jsx)("div",{onClick:()=>O(e.category&&e.category.id),children:(0,r.jsxs)("div",{className:"tarif-card ".concat(e.category&&e.category.id===L&&"active"),children:[(0,r.jsx)("img",{src:e.category&&e.category.icon,alt:"car",loading:"lazy"}),(0,r.jsx)("div",{className:"name",children:e.category&&e.category.translations[o.Ay.language].name}),e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsxs)("div",{className:"discount-price",children:[e.discount_price," ",s("sum")]})]}):(0,r.jsxs)("div",{className:"price",children:[e.cost," ",s("sum")]})]})},a)))}),(0,r.jsx)("div",{className:"funtion",children:(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/sms2.webp",alt:"sms",loading:"lazy"}),(0,r.jsx)("input",{onChange:e=>M(e.target.value),value:R,placeholder:s("comment_driver"),type:"text"})]})}),(0,r.jsxs)("div",{onClick:()=>re("payment-type"),className:"payment",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/payment.webp",alt:"sms",loading:"lazy"}),s("payment_type")]}),(0,r.jsxs)("div",{className:"right",children:["cash"===j.payment_type?s("cash"):s("card"),(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]}),(0,r.jsxs)("div",{className:"services",children:["postal"!==B&&H.map(((e,a)=>{const i=J.includes(e.id);if(e.is_main)return(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsxs)("div",{className:"text",children:[(0,r.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,r.jsxs)("div",{className:"price-service",children:["To\u2018lov ",e.price," ",s("sum")]})]})}),(0,r.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,r.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),"postal"!==B&&(0,r.jsxs)("div",{onClick:()=>{if(L)d((0,y.BG)(1));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"service cursor",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/filter.webp",alt:"sms",loading:"lazy"}),s("plus_service")]}),(0,r.jsxs)("div",{className:"right",children:[J.length>0&&(0,r.jsx)("div",{className:"count-service",children:J.length}),(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})]})]})]})]}),0===i&&(0,r.jsx)("div",{onClick:()=>{if(null!==t[0].latitude&&null!==x[0].latitude&&L)d("postal"!==B?(0,y.BG)(6):(0,y.BG)(7));else{let e=Date.now(),a={id:e,text:s("tariff_location"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,r.jsx)("div",{className:"button",children:s("next")})}),1===i&&(0,r.jsxs)("div",{className:"services-box",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_service")})]}),H.map(((e,a)=>{const i=J.includes(e.id);if(!e.is_main)return(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsxs)("div",{className:"text",children:[(0,r.jsx)("div",{className:"name",children:e.translations[o.Ay.language].name}),(0,r.jsxs)("div",{className:"price-service",children:[s("payment")," ",e.price," ",s("sum")]})]})}),(0,r.jsx)("div",{className:"on-of ".concat(i?"active-icon":""),onClick:()=>oe(e.id),children:(0,r.jsx)("div",{className:"on-icon ".concat(i?"active":"")})})]},a)})),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsx)("div",{className:"input-time",children:U.map(((e,a)=>{if(L===e.category.id)return(0,r.jsx)("span",{children:e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsx)("div",{className:"discount-price",children:(0,r.jsx)(E,{price:e.discount_price})})]}):(0,r.jsxs)("div",{className:"price",children:[(0,r.jsx)(E,{price:e.cost})," ",s("sum")]})},a)}))})]})]}),3===i&&(0,r.jsxs)("div",{className:"search-driver",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("div",{className:"title",children:s("search_driver")}),(0,r.jsx)("span",{children:F})]}),(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("span",{className:"loader"})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations&&c.pick_up_locations.map(((e,s)=>(0,r.jsx)("span",{children:e.address},s)))})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations&&c.drop_off_locations.map(((e,s)=>(0,r.jsx)("span",{children:e.address},s)))})]})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.discount_price>0&&c.discount_price,c.cost>0&&c.cost,s("sum")]})]})]}),(0,r.jsx)("div",{className:"buttons",children:(0,r.jsxs)("div",{onClick:()=>re("cancel-order",c.id),className:"cancel-btn",children:[(0,r.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),4===i&&(0,r.jsxs)("div",{className:"get-driver",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:s("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),(0,r.jsx)("div",{className:"button-call",children:(0,r.jsxs)("div",{className:"call-driver",children:[(0,r.jsx)("img",{src:"./images/phone.png",alt:"phone",loading:"lazy"}),(0,r.jsxs)("a",{href:"tel:".concat(c.driver.phone),children:[" ",c.driver.phone]})]})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsx)("div",{className:"location-from",children:(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"location-to",children:(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.discount_price>0&&c.discount_price,c.cost>0&&c.cost,s("sum")]})]})]}),(0,r.jsx)("div",{className:"buttons",children:(0,r.jsxs)("div",{onClick:()=>re("cancel-order",c.id),className:"cancel-btn",children:[(0,r.jsx)("img",{src:"./images/x.webp",alt:"cancel",loading:"lazy"}),s("cancel_order")]})})]}),5===i&&(0,r.jsxs)("div",{className:"rate-driver",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[c.driver.car_color.translations[o.Ay.language].name,"\u2002",c.driver.car_make.translations[o.Ay.language].name,"\u2002",c.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:c.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:c.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:c.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[c.driver.first_name,"\u2002",c.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:s("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),c.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:s("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:c.driver.finished_orders_count})]})]})]})]}),z&&(0,r.jsx)("div",{className:"rate-stars",children:(0,r.jsx)(p.A,{count:5,onChange:e=>{C(e),ve()},value:S,size:35,color2:"rgba(250, 190, 25, 1)",half:!1})}),(0,r.jsxs)("div",{className:"location-box",children:[(0,r.jsx)("div",{className:"location-from",children:(0,r.jsx)("div",{className:"location-text",children:c.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"location-to",children:(0,r.jsx)("div",{className:"location-text",children:c.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))})})]}),(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("direction")}),(0,r.jsx)("div",{className:"val",children:c.car_service&&c.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("tarif")}),(0,r.jsx)("div",{className:"val",children:c.car_category&&c.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("payment_type")}),(0,r.jsx)("div",{className:"val",children:"cash"===c.payment_type?s("cash"):s("card")})]}),c.car_service&&"Postal"===c.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("sender")}),(0,r.jsx)("div",{className:"val",children:c.sender_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("person2")}),(0,r.jsx)("div",{className:"val",children:c.receiver_phone})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("pay_who")}),(0,r.jsx)("div",{className:"val",children:"sender"===c.payer?s("sender"):s("person2")})]})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("order_id")}),(0,r.jsx)("div",{className:"val",children:c.id})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("date_time")}),(0,r.jsx)("div",{className:"val",children:c.pick_up_date})]})]}),c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:s("plus_service")}),(0,r.jsx)("div",{className:"val",children:c.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]}),(0,r.jsxs)("div",{className:"price-order",children:[c.car_service&&"Postal"!==c.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsx)("div",{className:"val",children:c.passanger_count})]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsxs)("div",{className:"val-price",children:[c.price," ",s("sum")]})]})]})]}),6===i&&(0,r.jsxs)("div",{className:"info-box",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("date")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:K,onChange:e=>V(e.target.value),type:"date"})})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("time")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:Y,onChange:e=>W(e.target.value),type:"time"})})]}),(0,r.jsxs)("div",{className:"client-count",children:[(0,r.jsx)("div",{className:"title",children:s("passangers_count")}),(0,r.jsxs)("div",{className:"counter",children:[(0,r.jsx)("div",{className:"label",children:s("passangers_count")}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{onClick:()=>{g>1&&_((e=>e-1))},className:"button",children:(0,r.jsx)("img",{src:"./images/minus-sm.png",alt:"count"})}),(0,r.jsx)("span",{children:g}),(0,r.jsx)("div",{onClick:()=>{"regional"===B?g<4&&_((e=>e+1)):g<12&&_((e=>e+1))},className:"button",children:(0,r.jsx)("img",{src:"./images/plus-sm.png",alt:"count"})})]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"service",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("div",{className:"text",children:(0,r.jsx)("div",{className:"name",children:s("all_seats")})})}),(0,r.jsx)("div",{onClick:()=>q((e=>!e)),className:"on-of ".concat($?"active-icon":""),children:(0,r.jsx)("div",{className:"on-icon ".concat($?"active":"")})})]})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("price")}),(0,r.jsx)("div",{className:"input-time",children:U.map(((e,a)=>{if(L===e.category.id)return(0,r.jsx)("span",{children:e.discount_price>0?(0,r.jsxs)("div",{className:"price-discount",children:[(0,r.jsxs)("div",{className:"main-price",children:[e.cost," ",s("sum")]}),(0,r.jsx)("div",{className:"discount-price",children:(0,r.jsx)(E,{price:e.discount_price})})]}):(0,r.jsxs)("div",{className:"price",children:[(0,r.jsx)(E,{price:e.cost})," ",s("sum")]})},a)}))})]})]}),7===i&&(0,r.jsxs)("div",{className:"info-box-postal",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("img",{onClick:()=>d((0,y.BG)(0)),src:"./images/prev.png",alt:"prev",loading:"lazy"}),(0,r.jsx)("div",{className:"title",children:s("plus_info")})]}),(0,r.jsxs)("div",{className:"info-postal",children:[(0,r.jsx)("div",{className:"title",children:s("sender")}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-person",children:(0,r.jsx)("img",{src:"./images/person.webp",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("sender_location")}),(0,r.jsx)("div",{className:"bottom-info",children:t[0].address})]})]}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-phone",children:(0,r.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("phone")}),(0,r.jsx)("div",{className:"bottom-info",children:(0,r.jsx)("input",{value:Q,onChange:e=>ee(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,r.jsxs)("div",{className:"info-postal",children:[(0,r.jsx)("div",{className:"title",children:s("postal")}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-postal",children:(0,r.jsx)("img",{src:"./images/package_2_fill.webp",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("postal_location")}),(0,r.jsx)("div",{className:"bottom-info",children:x[0].address})]})]}),(0,r.jsxs)("div",{className:"person-info",children:[(0,r.jsx)("div",{className:"left-icon-phone",children:(0,r.jsx)("img",{src:"./images/phone-person.png",alt:"person"})}),(0,r.jsxs)("div",{className:"right-info",children:[(0,r.jsx)("div",{className:"title",children:s("phone")}),(0,r.jsx)("div",{className:"bottom-info",children:(0,r.jsx)("input",{value:ae,onChange:e=>ie(e.target.value),placeholder:s("phone_form"),type:"number"})})]})]})]}),(0,r.jsxs)("div",{className:"order-info",children:[(0,r.jsx)("div",{className:"title",children:s("about_order")}),(0,r.jsxs)("div",{className:"payment-who",children:[(0,r.jsx)("div",{className:"title",children:s("payment_who")}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>ce("sender"),className:"of ".concat("sender"===le?"on":""),children:s("person1")}),(0,r.jsx)("div",{onClick:()=>ce("receiver"),className:"of ".concat("receiver"===le?"on":""),children:s("person2")})]})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("postal"!==B?"date":"date2")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:K,onChange:e=>V(e.target.value),type:"date"})})]}),(0,r.jsxs)("div",{className:"form-date",children:[(0,r.jsx)("div",{className:"label",children:s("time")}),(0,r.jsx)("div",{className:"input-time",children:(0,r.jsx)("input",{value:Y,onChange:e=>W(e.target.value),type:"time"})})]})]})]}),(6===i||7===i)&&(0,r.jsx)("div",{onClick:()=>{let e={car_service:B,car_category:L,passanger_count:g,payment_type:j.payment_type,pick_up_date:"".concat(K,"T").concat(Y),end_date:null,book_all_seats:$,comment_to_driver:R,sender_phone:Q,receiver_phone:ae,payer:le,extra_services:J,pick_up_locations:t,drop_off_locations:x};if(K&&Y)v.A.post("".concat(a,"/api/v1/order-create/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{d((0,b.r$)([e.data])),ne();let a=Date.now(),i={id:a,text:s("confirm"),img:"./images/green.svg",color:"#EDFFFA"};d((0,w.Iw)(i)),setTimeout((()=>{d((0,w.ae)(a))}),5e3),d((0,N.yz)()),d((0,u.Sw)()),new Audio(A).play()}));else{let e=Date.now(),a={id:e,text:s("confirm_form"),img:"./images/red.svg",color:"#FFEDF1"};d((0,w.Iw)(a)),setTimeout((()=>{d((0,w.ae)(e))}),5e3)}},className:"button-box",children:(0,r.jsx)("div",{className:"button",children:s("order")})})]})},P=["places"],U=()=>{const{t:e}=(0,n.Bd)(),s=(0,m.d4)((e=>e.baseUrl.data)),a=(0,m.d4)((e=>e.DriverLocation.data)),i=(0,m.d4)((e=>e.ShowHideMenu.data)),[c,d]=(0,l.useState)(!1),[x,p]=(0,l.useState)(),N=(0,m.wA)(),u=(0,m.d4)((e=>e.ModalContent.data)),_=(0,l.useRef)(null),[f,b]=(0,l.useState)([]),[y,w]=(0,l.useState)({}),[k,A]=(0,l.useState)(!0);(0,l.useEffect)((()=>{navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;p({lat:s,lng:a})})),v.A.get("".concat(s,"/api/v1/client-history/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{b(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),E("log-in"))}))}),[]);const{isLoaded:S}=(0,j.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM",libraries:P,language:o.Ay.language}),C=(0,l.useMemo)((()=>({disableDefaultUI:!0,clickableIcons:!1})),[]),z=[{code:"uz",name:"O'zbek tili",country_code:"uz"},{code:"en",name:"English language",country_code:"en"},{code:"ru",name:"P\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",country_code:"ru"}],E=e=>{N((0,h.Ui)({show:!0,status:e}))};return S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(F.m,{children:[(0,r.jsx)("title",{children:e("home-title")}),(0,r.jsx)("meta",{name:"description",content:e("home-des")})]}),(0,r.jsxs)("div",{className:"dashboard-wrapper-mobile",children:[(0,r.jsx)(I.A,{in:u.show&&"orders"===u.status,nodeRef:_,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy-orders ".concat(c?"disabled":""),children:(0,r.jsxs)("div",{ref:_,className:"modal-card",children:[(0,r.jsx)("div",{className:"header-buttons",children:(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("h1",{className:"title",children:e("my_orders")}),(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{N((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]})}),(0,r.jsx)("div",{className:"orders-list",children:f.map(((s,a)=>(0,r.jsxs)("div",{className:"order",children:[(0,r.jsx)("div",{className:"date-order",children:s.created_at.split(" ")[0]}),(0,r.jsxs)("div",{onClick:()=>{d(!0),w(s)},className:"order-info",children:[s.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsx)("div",{className:"line"}),s.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsxs)("div",{className:"bottom-info",children:[(0,r.jsxs)("div",{className:"left-info",children:[(0,r.jsx)("div",{className:"text",children:s.created_at.split(" ")[1].slice(0,5)}),(0,r.jsx)("div",{className:"dot"}),(0,r.jsx)("div",{className:"text",children:s.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"price",children:[s.price," ",e("sum")]})]})]})]},a)))})]})})}),(0,r.jsx)(I.A,{in:c,nodeRef:_,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy-orders",children:(0,r.jsxs)("div",{ref:_,className:"modal-card-about-order",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("div",{onClick:()=>d(!1),className:"cancel-btn",children:(0,r.jsx)("img",{src:"./images/cancel.webp",alt:"cancel"})})}),y.driver&&y.client&&y&&(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[y.driver.car_color.translations[o.Ay.language].name,"\u2002",y.driver.car_make.translations[o.Ay.language].name,"\u2002",y.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:y.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:y.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:s+"/"+y.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:s+"/"+y.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[y.driver.first_name,"\u2002",y.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:e("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),y.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:e("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:y.driver.finished_orders_count})]})]})]})]}),(0,r.jsxs)("div",{className:"location-box",children:[y.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsx)("div",{className:"line"}),y.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))]}),(0,r.jsxs)("div",{className:"information-box-order",children:[(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("direction")}),(0,r.jsx)("div",{className:"value",children:y.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("tarif")}),(0,r.jsx)("div",{className:"value",children:y.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("payment_type")}),(0,r.jsxs)("div",{className:"value",children:[(0,r.jsx)("img",{src:"./images/money.webp",alt:"money",loading:"lazy"}),"cash"===y.payment_type&&e("cash"),"card"===y.payment_type&&e("card")]})]}),y.car_service&&"Postal"===y.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("sender")}),(0,r.jsx)("div",{className:"value",children:y.sender_phone})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("person2")}),(0,r.jsx)("div",{className:"value",children:y.receiver_phone})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("pay_who")}),(0,r.jsx)("div",{className:"value",children:"sender"===y.payer?e("sender"):e("person2")})]})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("order_id")}),(0,r.jsx)("div",{className:"value",children:y.id})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("date_time")}),(0,r.jsx)("div",{className:"value",children:y.end_date?y.end_date:y.pick_up_date})]}),y.car_service&&"Postal"!==y.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:e("plus_service")}),(0,r.jsx)("div",{className:"val",children:y.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]})]}),(0,r.jsxs)("div",{className:"bottom-info",children:[y.car_service&&"Postal"!==y.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("passangers_count")}),(0,r.jsx)("div",{className:"value",children:y.passanger_count})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("price")}),(0,r.jsxs)("div",{className:"value price",children:[y.discount_price>0&&y.discount_price,y.price>0&&y.price," ",e("sum")]})]})]})]})]})})}),i.show&&(0,r.jsxs)("div",{className:"header-mobile",children:[(0,r.jsxs)("div",{className:"cancel-btn",children:[(0,r.jsx)("img",{onClick:()=>N((0,T.jD)({show:!1})),src:"./images/stroke-cancel-max.png",alt:"x"}),(0,r.jsx)("div",{className:"language-btn",children:(0,r.jsxs)(t.A,{children:[(0,r.jsxs)(t.A.Toggle,{variant:"success",id:"dropdown-basic",children:[(0,r.jsx)("img",{className:"globe",src:"./images/globe-alt.webp",alt:"language",loading:"lazy"}),(0,r.jsx)("div",{className:"name",children:z.map(((e,s)=>(0,r.jsx)("div",{children:o.Ay.language===e.code?e.name:""},s)))})]}),(0,r.jsx)(t.A.Menu,{children:z.map((e=>{let{code:s,name:a,country_code:i}=e;return(0,r.jsx)(t.A.Item,{onClick:()=>(e=>{localStorage.setItem("lng",e),o.Ay.changeLanguage(e)})(s),children:a},i)}))})]})})]}),(0,r.jsx)(D,{})]}),(0,r.jsxs)("div",{className:"top-side",children:[(0,r.jsx)("div",{onClick:()=>N((0,T.WU)({show:!0})),className:"header-menu",children:(0,r.jsx)("img",{src:"./images/menu.png",alt:"burger-menu"})}),(0,r.jsxs)("div",{className:"header-sides",children:[(0,r.jsx)("div",{className:"sides-item",children:(0,r.jsx)("div",{onClick:()=>{A(!0)},className:"".concat(k?"active-side":""),children:e("order-side")})}),(0,r.jsx)("div",{className:"sides-item",children:(0,r.jsx)("div",{onClick:()=>{A(!1)},className:"".concat(k?"":"active-side"),children:e("map-side")})})]}),(0,r.jsx)("div",{className:"header-menu",children:(0,r.jsx)("img",{onClick:()=>E("news"),src:"./images/bell.png",alt:"bell"})})]}),(0,r.jsxs)("div",{className:"bottom-side",children:[(0,r.jsxs)(j.u6,{zoom:11,center:x,options:C,mapContainerClassName:"map",children:[x&&(0,r.jsx)(j.X0,{position:x,icon:{url:"./images/address.png",scaledSize:{width:40,height:50}}}),a.latitude&&a.longitude&&(0,r.jsx)(j.X0,{position:{lat:a.latitude,lng:a.longitude},icon:{url:"./images/driver-icon.png",scaledSize:{width:60,height:60}}})]}),k?(0,r.jsx)(B,{}):"",(0,r.jsxs)("div",{className:"app-box",children:[(0,r.jsxs)("div",{className:"top-side-app",children:[(0,r.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"Download on the"}),(0,r.jsx)("b",{children:"App store"})]})]}),(0,r.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,r.jsx)("b",{children:"Google Play"})]})]})]}),(0,r.jsx)("div",{className:"bottom-side-app",children:(0,r.jsxs)("a",{target:"_blank",href:"https://adataxi.uz/offer-app",children:["\xa9 2025 \u041e\u041e\u041e \xabADA TAXI\xbb",e("offer")]})})]}),(0,r.jsx)("div",{className:"text-warning",children:e("map_warning")})]})]})]}):(0,r.jsx)(g.A,{})},G=["places"],L=()=>{const{t:e}=(0,n.Bd)(),s=(0,m.d4)((e=>e.baseUrl.data)),a=(0,m.d4)((e=>e.DriverLocation.data)),[i,c]=(0,l.useState)(!1),[d,t]=(0,l.useState)(),p=(0,m.wA)(),N=(0,m.d4)((e=>e.ModalContent.data)),u=(0,l.useRef)(null),[_,f]=(0,l.useState)([]),[b,y]=(0,l.useState)({});(0,l.useEffect)((()=>{navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;t({lat:s,lng:a})})),v.A.get("".concat(s,"/api/v1/client-history/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{f(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),A("log-in"))}))}),[]);const{isLoaded:w}=(0,j.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM",libraries:G,language:o.Ay.language}),k=(0,l.useMemo)((()=>({disableDefaultUI:!0,clickableIcons:!1})),[]),A=e=>{p((0,h.Ui)({show:!0,status:e}))};return w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(F.m,{children:[(0,r.jsx)("title",{children:e("home-title")}),(0,r.jsx)("meta",{name:"description",content:e("home-des")})]}),(0,r.jsxs)("div",{className:"dashboard-wrapper",children:[(0,r.jsx)(I.A,{in:N.show&&"orders"===N.status,nodeRef:u,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy-orders ".concat(i?"disabled":""),children:(0,r.jsxs)("div",{ref:u,className:"modal-card",children:[(0,r.jsx)("div",{className:"header-buttons",children:(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("h1",{className:"title",children:e("my_orders")}),(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{p((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]})}),(0,r.jsx)("div",{className:"orders-list",children:_.map(((s,a)=>(0,r.jsxs)("div",{className:"order",children:[(0,r.jsx)("div",{className:"date-order",children:s.created_at.split(" ")[0]}),(0,r.jsxs)("div",{onClick:()=>{c(!0),y(s)},className:"order-info",children:[s.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsx)("div",{className:"line"}),s.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsxs)("div",{className:"bottom-info",children:[(0,r.jsxs)("div",{className:"left-info",children:[(0,r.jsx)("div",{className:"text",children:s.created_at.split(" ")[1].slice(0,5)}),(0,r.jsx)("div",{className:"dot"}),(0,r.jsx)("div",{className:"text",children:s.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"price",children:[s.price," ",e("sum")]})]})]})]},a)))})]})})}),(0,r.jsx)(I.A,{in:i,nodeRef:u,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy-orders",children:(0,r.jsxs)("div",{ref:u,className:"modal-card-about-order",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("div",{onClick:()=>c(!1),className:"cancel-btn",children:(0,r.jsx)("img",{src:"./images/cancel.webp",alt:"cancel"})})}),b.driver&&b.client&&b&&(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"car-info",children:[(0,r.jsxs)("div",{className:"name-car",children:[b.driver.car_color.translations[o.Ay.language].name,"\u2002",b.driver.car_make.translations[o.Ay.language].name,"\u2002",b.driver.car_model.translations[o.Ay.language].name]}),(0,r.jsxs)("div",{className:"car-number",children:[(0,r.jsx)("div",{className:"num",children:b.driver.car_number.slice(0,2)}),(0,r.jsx)("div",{className:"line"}),(0,r.jsx)("div",{className:"num",children:b.driver.car_number.slice(2)})]})]}),(0,r.jsx)("div",{className:"car-img",children:(0,r.jsx)("img",{src:s+"/"+b.car_category.icon,alt:"car",loading:"lazy"})})]}),(0,r.jsxs)("div",{className:"driver-info",children:[(0,r.jsx)("div",{className:"person-img",children:(0,r.jsx)("img",{src:s+"/"+b.driver.profile_image,alt:""})}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsxs)("div",{className:"name",children:[b.driver.first_name,"\u2002",b.driver.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:e("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),b.driver.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:e("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:b.driver.finished_orders_count})]})]})]})]}),(0,r.jsxs)("div",{className:"location-box",children:[b.pick_up_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-from",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s))),(0,r.jsx)("div",{className:"line"}),b.drop_off_locations.map(((e,s)=>(0,r.jsxs)("div",{className:"location-to",children:[(0,r.jsx)("div",{className:"circle-warpper",children:(0,r.jsx)("div",{className:"circle"})}),(0,r.jsx)("div",{className:"location-text",children:e.address})]},s)))]}),(0,r.jsxs)("div",{className:"information-box-order",children:[(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("direction")}),(0,r.jsx)("div",{className:"value",children:b.car_service.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("tarif")}),(0,r.jsx)("div",{className:"value",children:b.car_category.translations[o.Ay.language].name})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("payment_type")}),(0,r.jsxs)("div",{className:"value",children:[(0,r.jsx)("img",{src:"./images/money.webp",alt:"money",loading:"lazy"}),"cash"===b.payment_type&&e("cash"),"card"===b.payment_type&&e("card")]})]}),b.car_service&&"Postal"===b.car_service.translations.en.name&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("sender")}),(0,r.jsx)("div",{className:"value",children:b.sender_phone})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("person2")}),(0,r.jsx)("div",{className:"value",children:b.receiver_phone})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("pay_who")}),(0,r.jsx)("div",{className:"value",children:"sender"===b.payer?e("sender"):e("person2")})]})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("order_id")}),(0,r.jsx)("div",{className:"value",children:b.id})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("date_time")}),(0,r.jsx)("div",{className:"value",children:b.end_date?b.end_date:b.pick_up_date})]}),b.car_service&&"Postal"!==b.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"information-plus",children:[(0,r.jsx)("div",{className:"label",children:e("plus_service")}),(0,r.jsx)("div",{className:"val",children:b.extra_services.map(((e,s)=>(0,r.jsx)("span",{children:e.translations[o.Ay.language].name},s)))})]})]}),(0,r.jsxs)("div",{className:"bottom-info",children:[b.car_service&&"Postal"!==b.car_service.translations.en.name&&(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("passangers_count")}),(0,r.jsx)("div",{className:"value",children:b.passanger_count})]}),(0,r.jsxs)("div",{className:"list",children:[(0,r.jsx)("div",{className:"title",children:e("price")}),(0,r.jsxs)("div",{className:"value price",children:[b.discount_price>0&&b.discount_price,b.price>0&&b.price," ",e("sum")]})]})]})]})]})})}),(0,r.jsx)("div",{className:"top-side",children:(0,r.jsx)(x,{})}),(0,r.jsxs)("div",{className:"bottom-side",children:[(0,r.jsxs)(j.u6,{zoom:11,center:d,options:k,mapContainerClassName:"map",children:[d&&(0,r.jsx)(j.X0,{position:d,icon:{url:"./images/address.png",scaledSize:{width:40,height:50}}}),a.latitude&&a.longitude&&(0,r.jsx)(j.X0,{position:{lat:a.latitude,lng:a.longitude},icon:{url:"./images/driver-icon.png",scaledSize:{width:60,height:60}}})]}),(0,r.jsx)(z,{}),(0,r.jsxs)("div",{className:"app-box",children:[(0,r.jsxs)("div",{className:"top-side-app",children:[(0,r.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"Download on the"}),(0,r.jsx)("b",{children:"App store"})]})]}),(0,r.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,r.jsx)("b",{children:"Google Play"})]})]})]}),(0,r.jsx)("div",{className:"bottom-side-app",children:(0,r.jsxs)("a",{target:"_blank",href:"https://adataxi.uz/offer-app",children:["\xa9 2025 \u041e\u041e\u041e \xabADA TAXI\xbb",e("offer")]})})]}),(0,r.jsx)("div",{className:"text-warning",children:e("map_warning")})]})]}),(0,r.jsx)("div",{className:"mobil-device",children:(0,r.jsx)(U,{})})]}):(0,r.jsx)(g.A,{})},O=()=>{const{t:e}=(0,n.Bd)(),s=(0,m.d4)((e=>e.baseUrl.data)),a=(0,c.Zp)(),i=(0,m.wA)(),[d,t]=(0,l.useState)({}),[o,j]=(0,l.useState)("");(0,l.useEffect)((()=>{localStorage.getItem("token")&&(v.A.get("".concat(s,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{t(e.data)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),g("log-in"))})),v.A.get("".concat(s,"/api/v1/mycode/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{j(e.data.code)})))}),[]);const g=e=>{i((0,h.Ui)({show:!0,status:e}))};return(0,r.jsxs)("div",{className:"profile-wrapper",children:[(0,r.jsxs)(F.m,{children:[(0,r.jsx)("title",{children:e("home-title")}),(0,r.jsx)("meta",{name:"description",content:e("home-des")})]}),(0,r.jsx)("div",{className:"top-side",children:(0,r.jsx)(x,{})}),(0,r.jsx)("div",{className:"bottom-side",children:(0,r.jsxs)("div",{className:"information-profile",children:[(0,r.jsx)("div",{className:"photo-client",children:d.profile_image?(0,r.jsx)("img",{src:d.profile_image,alt:"photo",loading:"lazy"}):(0,r.jsx)("img",{src:"./images/user.webp",alt:"person",loading:"lazy"})}),(0,r.jsxs)("div",{className:"name",children:[d.first_name,"\u2002",d.last_name]}),(0,r.jsxs)("div",{className:"information",children:[(0,r.jsxs)("div",{className:"rate",children:[(0,r.jsx)("div",{className:"label",children:e("rate")}),(0,r.jsxs)("div",{className:"info",children:[(0,r.jsx)("img",{src:"./images/star.webp",alt:"star",loading:"lazy"}),d.rate]})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("div",{className:"label",children:e("orders_finishet")}),(0,r.jsx)("div",{className:"info",children:d.finished_orders_count})]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"lef-code",children:[(0,r.jsx)("div",{className:"label",children:e("your_code")}),(0,r.jsxs)("div",{className:"your-code",children:[o,(0,r.jsx)("img",{onClick:()=>{o&&navigator.clipboard.writeText(o).then((()=>{let s=Date.now(),a={id:s,text:e("referal_alert5"),img:"./images/green.svg",color:"#EDFFFA"};i((0,w.Iw)(a)),setTimeout((()=>{i((0,w.ae)(s))}),5e3)}))},src:"./images/copy.png",alt:"copy"})]})]})]}),(0,r.jsx)("div",{className:"contacts",children:(0,r.jsxs)("div",{className:"item",children:[(0,r.jsx)("div",{className:"label",children:e("my_phone")}),(0,r.jsx)("div",{className:"info",children:d.phone})]})}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsxs)("div",{onClick:()=>a("/edit-profile"),className:"item",children:[(0,r.jsx)("img",{src:"./images/edit.webp",alt:"edit",loading:"lazy"}),e("edit")]}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{onClick:()=>g("log-out"),className:"item",children:[(0,r.jsx)("img",{src:"./images/log-out-user.webp",alt:"log-out",loading:"lazy"}),e("logOut")]})]})]})})]})};var R=a(4412);const M=()=>{const e=(0,R.A)("(max-width: 1024px)"),{t:s}=(0,n.Bd)(),a=(0,m.d4)((e=>e.baseUrl.data)),i=(0,c.Zp)(),d=(0,m.wA)(),[t,o]=(0,l.useState)(null),[j,g]=(0,l.useState)(null),[p,N]=(0,l.useState)(""),[u,_]=(0,l.useState)(""),[f,b]=(0,l.useState)("male");(0,l.useEffect)((()=>{localStorage.getItem("token")&&v.A.get("".concat(a,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{N(e.data.first_name),_(e.data.last_name),b(e.data.gender),g(e.data.profile_image)})).catch((e=>{401==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),y("log-in"))}))}),[]);const y=e=>{d((0,h.Ui)({show:!0,status:e}))};return(0,r.jsxs)("div",{className:"edit-profile-wrapper",children:[(0,r.jsxs)(F.m,{children:[(0,r.jsx)("title",{children:s("home-title")}),(0,r.jsx)("meta",{name:"description",content:s("home-des")})]}),(0,r.jsx)("div",{className:"top-side",children:(0,r.jsx)(x,{})}),(0,r.jsx)("div",{className:"bottom-side",children:(0,r.jsxs)("div",{className:"information-profile",children:[(0,r.jsx)("div",{className:"photo-client",children:(0,r.jsx)("img",{src:j||"./images/camera.webp",alt:"photo",loading:"lazy"})}),(0,r.jsxs)("div",{className:"choose-img",children:[(0,r.jsx)("div",{className:"text",children:s(t?"edit":"add_photo")}),(0,r.jsx)("input",{onChange:e=>{const s=e.target.files[0];s&&(o(s),g(URL.createObjectURL(s)))},type:"file"})]}),(0,r.jsxs)("div",{className:"input-box",children:[(0,r.jsx)("div",{className:"label",children:s("first_name")}),(0,r.jsx)("input",{value:p,onChange:e=>N(e.target.value),type:"text"})]}),(0,r.jsxs)("div",{className:"input-box",children:[(0,r.jsx)("div",{className:"label",children:s("last_name")}),(0,r.jsx)("input",{value:u,onChange:e=>_(e.target.value),type:"text"})]}),(0,r.jsx)("div",{className:"label",children:s("gender")}),(0,r.jsxs)("div",{className:"on-of",children:[(0,r.jsx)("div",{onClick:()=>b("male"),className:"of ".concat("male"===f?"on":""),children:s("male")}),(0,r.jsx)("div",{onClick:()=>b("female"),className:"of ".concat("female"===f?"on":""),children:s("female")})]}),(0,r.jsxs)("div",{className:"buttons",children:[(0,r.jsx)("div",{onClick:()=>{i(e?"/":"/profile")},className:"cancel-btn",children:s("cancel_order")}),(0,r.jsx)("div",{onClick:()=>{let e={first_name:p,last_name:u,gender:f},i=new FormData;for(let s in e)i.append(s,e[s]);t&&i.append("profile_image",t),v.A.post("".concat(a,"/api/v1/client/"),i,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{let a=Date.now(),i={id:a,text:s("save_info"),img:"./images/green.svg",color:"#EDFFFA"};d((0,w.Iw)(i)),setTimeout((()=>{d((0,w.ae)(a))}),5e3)}))},className:"save-btn",children:s("save_information")})]})]})})]})},H=[{path:"/",element:(0,r.jsx)(L,{})},{path:"/profile",element:(0,r.jsx)(O,{})},{path:"/edit-profile",element:(0,r.jsx)(M,{})}];var X=a(4886),J=a(771);var Z=a(2075);a(7799);const $=()=>{let e=(0,l.useContext)(se);const{t:s}=(0,n.Bd)(),a=(0,l.useRef)(null),i=(0,m.d4)((e=>e.baseUrl.data)),c=(0,m.wA)(),d=(0,m.d4)((e=>e.ModalContent.data)),t=(0,m.d4)((e=>e.PaymentType.data)),[x,j]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[N,u]=(0,l.useState)(""),[f,b]=(0,l.useState)(!1),[y,k]=(0,l.useState)(0),[A,S]=(0,l.useState)(60),[C,z]=(0,l.useState)(0),[F,T]=(0,l.useState)([]),[D,E]=(0,l.useState)(""),[B,P]=(0,l.useState)(""),[U,G]=(0,l.useState)([]),[L,O]=(0,l.useState)([]),[R,M]=(0,l.useState)("");(0,l.useEffect)((()=>{const e=setInterval((()=>{A>0&&S(A-1),0===A&&(0===y?clearInterval(e):(S(60),k(y-1)))}),1e3);return()=>{clearInterval(e)}}),[f?A:null]),(0,l.useEffect)((()=>{localStorage.getItem("token")&&(v.A.get("".concat(i,"/api/v1/reject-reason/client/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{T(e.data)})),v.A.get("".concat(i,"/api/v1/mycode/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{M(e.data.code)})),v.A.get("".concat(i,"/api/v1/news/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{G(e.data)})),v.A.get("".concat(i,"/api/v1/my-discount/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{O(e.data)})))}),[]);const H=()=>{let e={phone:g,role:"client"};v.A.post("".concat(i,"/api/v1/auth/verify_number/"),e).then((e=>{localStorage.setItem("userId",e.data.user_id),b((e=>!0)),c((0,h.Ui)({show:!0,status:"log-in-code"})),f&&(k(0),S(59))})).catch((e=>{if(400===e.response.status&&-10===e.response.data.code){let e=Date.now(),a={id:e,text:s("error_phone"),img:"./images/yellow.svg",color:"#FFFAEA"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}}))},$=()=>{v.A.post("".concat(i,"/api/v1/auth/verify_code/"),{user:localStorage.getItem("userId"),code:N,role:"client"}).then((e=>{localStorage.setItem("token",e.data.token),v.A.get("".concat(i,"/api/v1/client/"),{headers:{Authorization:"Token ".concat(e.data.token)}}).then((e=>{e.data.first_name&&e.data.last_name?(c((0,h.AS)({show:!1})),window.location.reload()):(c((0,h.Ui)({show:!0,status:"referal-code"})),v.A.get("".concat(i,"/api/v1/mycode/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{M(e.data.code)})))}))})).catch((e=>{if(400===e.response.status&&-12===e.response.data.code){let e=Date.now(),a={id:e,text:s("error_code"),img:"./images/red.svg",color:"#FFFAEA"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}}))},q=e=>{let s={payment_type:e};c((0,Z.X$)(s))};var K,V;return K=f?$:H,V="Enter",(0,l.useEffect)((()=>{const e=e=>{e.key===V&&K()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[K,V]),(0,r.jsx)(I.A,{in:d.show&&"orders"!==d.status,nodeRef:a,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsxs)("div",{ref:a,className:"modal-card",children:["log-out"===d.status&&(0,r.jsxs)("div",{className:"confirm",children:[(0,r.jsx)("div",{className:"toptext",children:s("log_out_text1")}),(0,r.jsxs)("div",{className:"btns",children:[(0,r.jsx)("button",{className:"not-out",onClick:()=>c((0,h.AS)({show:!1})),children:s("log_out_text2")}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),window.location.reload(),window.location.pathname="/"},children:s("log_out_text3")})]})]}),"log-in"===d.status&&(0,r.jsxs)("div",{className:"login-box",children:[(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"./images/logo2.webp",alt:""})}),(0,r.jsx)("h1",{className:"title",children:s("login_text")}),(0,r.jsx)("p",{className:"des",children:s("login_des")}),(0,r.jsx)("div",{className:"label",children:s("login_phone")}),(0,r.jsx)(X.Ay,{id:"phone",international:!0,defaultCountry:"UZ",value:g,onChange:p}),(0,r.jsx)("button",{onClick:H,disabled:""===g||void 0===g,className:"next-btn ".concat(""===g||void 0===g?"disabled":""),children:s("next")})]}),"log-in-code"===d.status&&(0,r.jsxs)("div",{className:"login-box",children:[(0,r.jsx)("h1",{className:"title",children:s("enter_code")}),(0,r.jsx)("p",{className:"des",children:s("enter_code2")}),(0,r.jsxs)("div",{className:"phone-number",children:[g," ",(0,r.jsx)("img",{onClick:()=>{c((0,h.Ui)({show:!0,status:"log-in"})),b(!1)},src:"./images/pencil.webp",alt:"edit-phone",loading:"lazy"})]}),(0,r.jsx)("div",{className:"inputs-verify-code",children:(0,r.jsx)(J.A,{allowedCharacters:"numeric",length:"5",onChange:e=>{u(e)}})}),f&&A>0||y>0?(0,r.jsx)("div",{className:"coundown",children:(0,r.jsxs)("div",{className:"count",children:[(0,r.jsx)("img",{src:"./images/time.png",alt:""}),y<10?"0".concat(y):y,":",A<10?"0".concat(A):A]})}):(0,r.jsx)("div",{onClick:H,className:"code-ref",children:s("enter_code3")}),(0,r.jsx)("button",{disabled:N.trim().length<5,onClick:$,className:" next-btn ".concat(N.trim().length<5?"disabled":""),children:s("login")})]}),"referal-code"===d.status&&(0,r.jsxs)("div",{className:"referal-code",children:[(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"./images/logo2.webp",alt:""})}),(0,r.jsx)("h1",{className:"title",children:s("login_text_referal")}),(0,r.jsx)("p",{className:"des",children:s("login_des_referal")}),(0,r.jsx)("div",{className:"label",children:s("your_code")}),(0,r.jsxs)("div",{className:"your-code",children:[R,(0,r.jsx)("img",{onClick:()=>{R&&navigator.clipboard.writeText(R).then((()=>{let e=Date.now(),a={id:e,text:s("referal_alert5"),img:"./images/green.svg",color:"#EDFFFA"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}))},src:"./images/copy.png",alt:"copy"})]}),(0,r.jsx)("div",{className:"label",children:s("friend_code")}),(0,r.jsx)("input",{value:x,onChange:e=>j(e.target.value),placeholder:s("friend_input"),type:"text"}),(0,r.jsx)("button",{onClick:()=>{v.A.post("".concat(i,"/api/v1/revoke-code/"),{code:x},{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{c((0,h.AS)({show:!1}));let a=Date.now(),i={id:a,text:s("referal_alert1"),img:"./images/green.svg",color:"#EDFFFA"};c((0,w.Iw)(i)),setTimeout((()=>{c((0,w.ae)(a)),window.location.pathname="/edit-profile"}),5e3)})).catch((e=>{if(-37===e.response.data.code){let e=Date.now(),a={id:e,text:s("referal_alert2"),img:"./images/red.svg",color:"#ffeaea"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}if(-38===e.response.data.code){let e=Date.now(),a={id:e,text:s("referal_alert3"),img:"./images/red.svg",color:"#ffeaea"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}if(-39===e.response.data.code){let e=Date.now(),a={id:e,text:s("referal_alert4"),img:"./images/red.svg",color:"#ffeaea"};c((0,w.Iw)(a)),setTimeout((()=>{c((0,w.ae)(e))}),5e3)}}))},disabled:""===x,className:"next-btn ".concat(""===x?"disabled":""),children:s("referal_button")}),(0,r.jsxs)("div",{onClick:()=>{window.location.pathname="/edit-profile",c((0,h.AS)({show:!1}))},className:"skip-button",children:[s("skip_button")," >"]})]}),"download-app"===d.status&&(0,r.jsxs)("div",{className:"download-app",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})}),(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"./images/logo2.webp",alt:""})}),(0,r.jsx)("h1",{className:"title",children:s("title_apps")}),(0,r.jsxs)("div",{className:"top-side-app",children:[(0,r.jsxs)("a",{target:"_blank",href:"https://apps.apple.com/us/app/adataxi/id6744370881",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/apple.webp",alt:"apple",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"Download on the"}),(0,r.jsx)("b",{children:"App store"})]})]}),(0,r.jsxs)("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=uz.adataxi.client",className:"button",children:[(0,r.jsx)("div",{className:"left",children:(0,r.jsx)("img",{src:"./images/google.webp",alt:"google",loading:"lazy"})}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)("div",{className:"top-text",children:"GET IT ON"}),(0,r.jsx)("b",{children:"Google Play"})]})]})]})]}),"about-app"===d.status&&(0,r.jsxs)("div",{className:"about-app",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})}),(0,r.jsx)("h1",{className:"title",children:s("app_links")}),(0,r.jsx)("div",{className:"logo-card",children:(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"./images/logo3.webp",alt:""})})}),(0,r.jsx)("a",{href:"tel:+998915444499",children:(0,r.jsxs)("div",{className:"item line",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/phone.webp",alt:"phone",loading:"lazy"})}),(0,r.jsx)("div",{className:"name",children:"+998 91 544 44 99"})]}),(0,r.jsx)("div",{className:"icon-more",children:(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})})]})}),(0,r.jsx)("a",{target:"_blank",href:"https://t.me/adataxi_admin",children:(0,r.jsxs)("div",{className:"item",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("div",{className:"icon",children:(0,r.jsx)("img",{src:"./images/sms.webp",alt:"phone",loading:"lazy"})}),(0,r.jsx)("div",{className:"name",children:s("send-message")})]}),(0,r.jsx)("div",{className:"icon-more",children:(0,r.jsx)("img",{src:"./images/more.webp",alt:"more",loading:"lazy"})})]})}),(0,r.jsxs)("div",{className:"social-media",children:[(0,r.jsxs)("div",{className:"media",children:[(0,r.jsx)("a",{target:"_blank",href:"https://www.instagram.com/adataxi_uz/",children:(0,r.jsx)("img",{src:"./images/instagram.png",alt:"instagram",loading:"lazy"})}),(0,r.jsx)("div",{className:"name",children:"Facebook"})]}),(0,r.jsxs)("div",{className:"media",children:[(0,r.jsx)("a",{target:"_blank",href:"https://t.me/+Ruz2cjoeIC4xNTU6",children:(0,r.jsx)("img",{src:"./images/telegram.webp",alt:"yotube",loading:"lazy"})}),(0,r.jsx)("div",{className:"name",children:"Telegram"})]}),(0,r.jsxs)("div",{className:"media",children:[(0,r.jsx)("a",{target:"_blank",href:"https://www.youtube.com/@AdaTaxi",children:(0,r.jsx)("img",{src:"./images/youtube.webp",alt:"yotube",loading:"lazy"})}),(0,r.jsx)("div",{className:"name",children:"Youtube"})]})]}),(0,r.jsx)("div",{className:"web-sayt",children:(0,r.jsx)("a",{target:"_blank",href:"https://adataxi.uz/",children:"\xa9 2024 adataxi.uz"})})]}),"payment-type"===d.status&&(0,r.jsxs)("div",{className:"payment-type",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("h1",{className:"title",children:s("payment_type")})}),(0,r.jsxs)("div",{className:"radio-buttons",children:[(0,r.jsxs)("label",{className:"label-payment",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/wallet.png",alt:"card",loading:"lazy"}),(0,r.jsx)("span",{children:s("cash")})]}),(0,r.jsx)("input",{type:"radio",value:"cash",checked:"cash"===t.payment_type,onChange:e=>q(e.target.value),className:"w-4 h-4"})]}),(0,r.jsxs)("label",{className:"label-payment",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)("img",{src:"./images/card.webp",alt:"card",loading:"lazy"}),(0,r.jsx)("span",{children:s("card")})]}),(0,r.jsx)("input",{type:"radio",value:"card",checked:"card"===t.payment_type,onChange:e=>q(e.target.value),className:"w-4 h-4"})]})]}),(0,r.jsx)("div",{onClick:()=>{c((0,h.AS)({show:!1}))},className:"send-btn",children:s("success")})]}),"add-other"===d.status&&(0,r.jsxs)("div",{className:"add-other",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("h1",{className:"title",children:s("other-order")}),(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,r.jsxs)("div",{className:"form-box",children:[(0,r.jsx)("label",{htmlFor:"phone",children:s("phone")}),(0,r.jsx)("input",{value:D,onChange:e=>E(e.target.value),id:"phone",placeholder:s("phone_form"),type:"number"})]}),(0,r.jsxs)("div",{className:"form-box",children:[(0,r.jsx)("label",{htmlFor:"name",children:s("name")}),(0,r.jsx)("input",{value:B,onChange:e=>P(e.target.value),id:"name",placeholder:s("name_add"),type:"text"})]}),(0,r.jsx)("button",{onClick:()=>{let e={name:B,phone:D};c((0,_.L)(e)),c((0,h.AS)({show:!1}))},disabled:!(D.trim().length>0&&B.trim().length>0),className:"send-btn ".concat(D.trim().length>0&&B.trim().length>0?"":"btn-disablet"),children:s("success")})]}),"cancel-order"===d.status&&(0,r.jsxs)("div",{className:"cancel-order",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("h1",{className:"title",children:s("reason_cancel")}),(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,r.jsx)("div",{className:"radio-buttons",children:F.map(((e,s)=>(0,r.jsxs)("label",{className:"label-payment",children:[(0,r.jsx)("span",{children:e.translations[o.Ay.language].name}),(0,r.jsx)("input",{type:"radio",value:e.id,checked:C===e.id,onChange:()=>{z(e.id)}})]},e.id)))}),(0,r.jsx)("div",{onClick:()=>{e(d.id,C)},className:"send-btn",children:s("success")})]}),"news"===d.status&&(0,r.jsxs)("div",{className:"news",children:[(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{c((0,h.AS)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})}),(0,r.jsx)("h1",{className:"title",children:s("news")}),L.length>0&&(0,r.jsxs)("div",{className:"discount-box",children:[(0,r.jsx)("div",{className:"discount-title",children:s("discount-name")}),L.map(((e,a)=>(0,r.jsxs)("div",{className:"discount-card",children:[(0,r.jsx)("div",{className:"date",children:e.created_at}),(0,r.jsxs)("div",{className:"title-dis",children:[(0,r.jsx)("span",{children:"10%"}),s("discount-count")]}),(0,r.jsxs)("div",{className:"desc-dis",children:[s("discount-title"),(0,r.jsx)("div",{className:"info",children:s("discount-main-title")})]})]},a)))]}),U.length>0&&(0,r.jsxs)("div",{className:"news-box",children:[(0,r.jsx)("div",{className:"discount-title",children:s("news-title")}),U.map(((e,s)=>(0,r.jsxs)("div",{className:"discount-card",children:[(0,r.jsx)("div",{className:"date",children:e.created_at}),(0,r.jsx)("div",{className:"title-dis",children:e.translations[o.Ay.language].title}),(0,r.jsx)("div",{className:"desc-dis",children:e.translations[o.Ay.language].content})]},s)))]}),0===U.length&&0===L.length&&(0,r.jsx)("div",{className:"no-news",children:s("empty-news")})]})]})})})},q=()=>{const e=(0,m.wA)(),s=(0,m.d4)((e=>e.Alerts.data));return(0,r.jsx)("div",{className:"alerts-container",children:s.length>0&&(0,r.jsx)("div",{className:"alerts-box ".concat(s.length>3?"alerts-box-hide":""),children:s.map(((s,a)=>(0,r.jsxs)("div",{style:{borderTop:"4px solid ".concat("#EDFFFA"===s.color?"#5b9f68":"#dd495f"),background:s.color},className:"alert",children:[(0,r.jsx)("div",{className:"left-side",children:(0,r.jsx)("img",{src:s.img,alt:""})}),(0,r.jsx)("div",{className:"right-side",children:s.text}),(0,r.jsx)("div",{className:"xbtn",children:(0,r.jsx)("img",{onClick:()=>{return a=s.id,void e((0,w.ae)(a));var a},src:"./images/x-button.png",alt:""})})]},a)))})})};var K=a(7305);var V=a(3687);const Y=["places"],W=()=>{const{t:e}=(0,n.Bd)(),s=(0,l.useRef)(null),a=(0,m.wA)(),i=(0,m.d4)((e=>e.GetLocations.data)),c=(0,m.d4)((e=>e.PickUpLocations.data)),d=(0,m.d4)((e=>e.DropOffLocations.data)),[t,h]=(0,l.useState)(null),[x,p]=(0,l.useState)(""),[_,b]=(0,l.useState)(null);(0,l.useEffect)((()=>{if(navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})})),"pick_up"===i.location_status)if(c[i.location_num].address){let e={lat:c[i.location_num].latitude,lng:c[i.location_num].longitude};h(e),b(e),p(c[i.location_num].address)}else navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})}));if("drop_off"===i.location_status)if(d[i.location_num].address){let e={lat:d[i.location_num].latitude,lng:d[i.location_num].longitude};h(e),b(e),p(d[i.location_num].address)}else navigator.geolocation.getCurrentPosition((e=>{const{latitude:s,longitude:a}=e.coords;h({lat:s,lng:a})}))}),[!0===i.show]);const y=s=>{let{setSelected:l}=s;const{ready:c,value:n,setValue:d,suggestions:{status:t,data:m},clearSuggestions:x}=(0,V.Ay)({requestOptions:{language:o.Ay.language}});return(0,r.jsxs)(K.G3,{onSelect:async s=>{const c=await(0,V.fx)({address:s}),{lat:n,lng:r}=await(0,V.rg)(c[0]);let t={lat:n,lng:r};const m="https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(n,"&lon=").concat(r,"&lan=en");v.A.get("".concat(m),{headers:{"Accept-Language":o.Ay.language}}).then((c=>{let o=c.data.address.city,m=c.data.address.suburb,v=c.data.address.neighbourhood,j=c.data.address.county,g=c.data.address.road,N="".concat(o?o+",":""," ").concat(m?m+",":""," \n            ").concat(v?v+",":""," ").concat(j?j+",":""," ").concat(g||"");if("uz"===c.data.address.country_code)("pick_up"===i.location_status||"drop_off"===i.location_status)&&(p(N),l(t),h({lat:n,lng:r}),d(s,!1),x());else{let s=Date.now(),i={id:s,text:e("errorLocations"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}}))},children:[(0,r.jsx)(K.oK,{value:n,onChange:e=>d(e.target.value),disabled:!c,className:"combobox-input",placeholder:e("input1")}),(0,r.jsx)("div",{className:"address-wrapper",children:(0,r.jsx)("div",{className:"list-address",children:"OK"===t&&m.map((e=>{let{place_id:s,description:a}=e;return(0,r.jsx)(K.jO,{value:a},s)}))})})]})},{isLoaded:k}=(0,j.RH)({googleMapsApiKey:"AIzaSyBEN2azIRg6YCHa-tV8yAEUJoHsn__fRBM",libraries:Y,language:o.Ay.language}),A=(0,l.useMemo)((()=>({disableDefaultUI:!1,clickableIcons:!1})),[]);return k?(0,r.jsx)(I.A,{in:i.show,nodeRef:s,timeout:300,classNames:"alert",unmountOnExit:!0,children:(0,r.jsx)("div",{className:"modal-sloy",children:(0,r.jsx)("div",{ref:s,className:"modal-card",children:(0,r.jsxs)("div",{className:"add-location",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)("h1",{className:"title",children:e("choose_location")}),(0,r.jsx)("div",{className:"cancel-btn",children:(0,r.jsx)("img",{onClick:()=>{a((0,f.xi)({show:!1}))},src:"./images/cancel.webp",alt:"cancel"})})]}),(0,r.jsx)("div",{className:"map-box",children:(0,r.jsxs)(j.u6,{zoom:10,center:t,options:A,onClick:s=>{let l=s.latLng.lat(),c=s.latLng.lng(),n={lat:l,lng:c};const r="https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(l,"&lon=").concat(c,"&lan=en");v.A.get("".concat(r),{headers:{"Accept-Language":o.Ay.language}}).then((s=>{let l=s.data.address.city,c=s.data.address.suburb,r=s.data.address.neighbourhood,d=s.data.address.county,t=s.data.address.road,o="".concat(l?l+",":""," ").concat(c?c+",":""," \n            ").concat(r?r+",":""," ").concat(d?d+",":""," ").concat(t||"");if("uz"===s.data.address.country_code)("pick_up"===i.location_status||"drop_off"===i.location_status)&&(p(o),b(n));else{let s=Date.now(),i={id:s,text:e("errorLocations"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}}))},mapContainerClassName:"map",children:[_&&(0,r.jsx)(j.pH,{icon:{url:"./images/address.png",scaledSize:{width:40,height:50}},position:_}),t&&(0,r.jsx)(j.X0,{position:t,icon:{url:"./images/my-loc.png",scaledSize:{width:40,height:40}}}),(0,r.jsx)("div",{className:"search-address",children:(0,r.jsxs)("div",{className:"places-container",children:[(0,r.jsx)(y,{setSelected:b}),(0,r.jsx)("img",{src:"./images/search.png",alt:""})]})})]})}),(0,r.jsx)("div",{onClick:()=>{if("pick_up"===i.location_status)if(x&&_)a((0,N.ST)({index:Number(i.location_num),newData:{address:x,latitude:Number(_.lat.toString().slice(0,9)),longitude:Number(_.lng.toString().slice(0,9))}})),a((0,f.xi)({show:!1})),b(null),p("");else{let s=Date.now(),i={id:s,text:e("alert7"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}if("drop_off"===i.location_status)if(x&&_)a((0,u.vS)({index:Number(i.location_num),newData:{address:x,latitude:Number(_.lat.toString().slice(0,9)),longitude:Number(_.lng.toString().slice(0,9))}})),a((0,f.xi)({show:!1})),b(null),p("");else{let s=Date.now(),i={id:s,text:e("alert7"),img:"./images/red.svg",color:"#FFEDF1"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(s))}),5e3)}},className:"send-btn",children:e("success")})]})})})}):(0,r.jsx)(g.A,{})};var Q=a(5063),ee=a(5052);const se=(0,l.createContext)(),ae=()=>{const e=(0,m.d4)((e=>e.baseUrl.data)),{t:s}=(0,n.Bd)(),a=(0,m.wA)(),[t,o]=(0,l.useState)(null),x=(0,l.useRef)(null);(0,l.useEffect)((()=>{if(!localStorage.getItem("token"))return;const e=new Q.w3cwebsocket("wss://api.adataxi.uz/ws/client/?token=".concat(localStorage.getItem("token")));o(e);const i=Date.now(),l={id:i,text:s("net"),img:"./images/red.svg",color:"#FFEDF1"};e.onclose=e.onerror=()=>{a((0,w.Iw)(l)),setTimeout((()=>window.location.reload()),2e3)},e.onopen=()=>{a((0,w.ae)(i))},x.current=new Audio(k)}),[]),(0,l.useEffect)((()=>{if(!t)return;const e=e=>{const i=Date.now();a((0,w.Iw)({id:i,text:s(e),img:"./images/green.svg",color:"#EDFFFA"})),setTimeout((()=>a((0,w.ae)(i))),5e3),j()};t.onmessage=i=>{var l;const c=JSON.parse(i.data);if(-35===(null===(l=c.message)||void 0===l?void 0:l.code))return localStorage.removeItem("token"),localStorage.removeItem("userId"),void(window.location.pathname="/");switch(c.action){case"order_accepted":e("order_accepted"),g();break;case"arrived":e("arrived");break;case"order_started":e("order_started"),a((0,y.BG)(5));break;case"trip_started":e("trip_started");break;case"order_finished":a((0,y.BG)(0)),a((0,ee.Uc)({})),a((0,_.L)({name:"",phone:""})),a((0,u.Sw)()),a((0,N.yz)()),e("order_finished")}if("reject_order"===c.action){let e=Date.now(),i={id:e,text:s("alert_cancel"),img:"./images/green.svg",color:"#EDFFFA"};a((0,w.Iw)(i)),setTimeout((()=>{a((0,w.ae)(e))}),5e3),a((0,h.AS)({show:!1})),a((0,y.BG)(0)),a((0,ee.Uc)({})),a((0,_.L)({name:"",phone:""})),a((0,u.Sw)()),a((0,N.yz)()),j()}"driver_location"===c.action&&a((0,ee.Uc)(c.message))}}),[t]);const j=()=>{var e;null===(e=x.current)||void 0===e||e.play().catch((()=>{}))},g=()=>{localStorage.getItem("token")&&v.A.get("".concat(e,"/api/v1/client-active-orders/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((e=>{const s=e.data[0];s&&(a((0,b.r$)(s)),s.driver?a((0,y.BG)("started"===s.status?5:4)):a((0,y.BG)(3)))}))};return(0,r.jsxs)(se.Provider,{value:(e,i)=>{if(t)t.send(JSON.stringify({command:"reject_order",order_id:e,reason_id:i}));else{const e=Date.now();a((0,w.Iw)({id:e,text:s("net"),img:"./images/red.svg",color:"#FFEDF1"}))}},children:[(0,r.jsx)($,{}),(0,r.jsx)(q,{}),(0,r.jsx)(W,{}),(0,r.jsxs)(c.BV,{children:[H.map(((e,s)=>(0,r.jsx)(c.qh,(0,i.A)({},e),s))),(0,r.jsx)(c.qh,{path:"*",element:(0,r.jsx)(d,{})})]})]})}}}]);
//# sourceMappingURL=306.92fc834f.chunk.js.map